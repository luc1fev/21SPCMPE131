(function(){this.Blue=this.Blue||{},this.Blue.version=this.Blue.version||{},this.Blue.buildDate=this.Blue.buildDate||{},this.Blue.buildHash=this.Blue.buildHash||{},this.Blue.version["blue-app/main"]="2.25.1",this.Blue.buildDate["blue-app/main"]="2020-12-08T17:57:42.025Z",this.Blue.buildHash["blue-app/main"]="6405ee9"}).call(this),requirejs.config({}),define("blue-app/config",(function(){})),define("blue-app/settings",["require","blue/settings"],(function(e){"use strict";return e("blue/settings")})),define("blue-app/localeSettings",["require","./settings","blue/is","blue/index"],(function(e){"use strict";var t=e("./settings"),n=e("blue/is"),r=e("blue/index");return{addSettingsToModel:function(e){var i,a,o,s,u,c,l,p,d,f,m=t.get("USER_INFO")||{},h=e.spec,g=e.component&&e.component.kind,b=e.component.context.area&&e.component.context.area.areaName,v=h.name+".DEFAULT",y=g?h.name+"."+g:v;b&&(c="LOCALIZED_CONTENT_"+e.component.context.area.areaName.toString().toLowerCase()),l=t.get(c,t.Type.ENV),p=t.get("LOCALIZED_CONTENT_app",t.Type.ENV),d=t.get("LOCALIZED_CONTENT",t.Type.APP)||{},l&&(l=l[y]||l[v]||l[h.name]||void 0),p&&(p=p[y]||p[v]||p[h.name]||void 0),f=l||p,Object.keys(h.settings).map((function(e){var t,c=h.name&&e,g=c&&m&&m.channel;f&&c&&(i=function(e,t){var r,i;if(e&&t)for(n.array(e)||(e=[e]);r=e.shift()||e.length;)if(r&&r[t])return i=r[t],n.plainObject(i)&&(i=""),i}([l,p],e)),s="_default."+e,u=c?h.name+"."+e:void 0,o=g?u+"."+m.channel:void 0,a=g&&m.segment?o+"."+m.segment:void 0,n.string(t=i)||n.string(t=d[a])||n.string(t=d[o])||n.string(t=d[u])||n.string(t=d[s])||n.string(t=d[e])||(t=r.minified?"":"{"+e+"}"),i||(t+=""),n.plainObject(h.settings[e])?h.settings[e].value=t+"":h.settings[e]={value:t+""}}))}}})),define("blue-app/validate/validator",["require","blue/log","blue/declare"],(function(e){"use strict";var t=e("blue/log")("[app]");return e("blue/declare")({constructor:function(e){this.types=new Map,this.register(e)},register:function(e){Object.keys(e).forEach((function(t){"constructor"!==t&&this.types.set(t,e[t])}),this),t.debug("Registered validation types: ",this.availableTypes())},availableTypes:function(){var e,t=this.types.keys(),n=[];if(this.types instanceof Map)for(;e=t.next().value;)n.push(e);return n},validate:function(e,t,n){if(!this.types.has(t))throw new TypeError('Spec data type "'+t+'", does not exist. Please add it if none of the following suffices: '+this.availableTypes().join(", "));return this.types.get(t).validate(e,n)}})})),define("blue-app/validate/standardTypes",[],(function(){"use strict";return{AccountNumber:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:8,max:16}}]},AccountMaskNumber:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:7}},{type:"Numbers",params:{min:4,max:4}},{type:"Pattern",params:{regex:"/(\\d){4}$/"}}]},AlertsProfileNickname:{constraints:[{type:"Pattern",params:{regex:"/[A-Z a-z 0-9 _]$/"}}]},Category:{constraints:[{type:"Length",params:{min:2}}]},Description:{constraints:[{type:"NotBlank"}]},Date:{constraints:[{type:"Date"}]},Email:{constraints:[{type:"NotPhoneEmail"},{type:"Email"}]},AddressLine:{constraints:[{type:"AddressLine"}]},City:{constraints:[{type:"City"}]},ZipCode:{constraints:[{type:"ZipCode"}]},ZipCodeExtension:{constraints:[{type:"ZipCodeExtension"}]},PostalCode:{constraints:[{type:"PostalCode"}]},IdentificationCode:{constraints:[{type:"Integer"},{type:"Length",params:{max:8}}]},SimpleUserId:{constraints:[{type:"NonRepeatingSequence"}]},TaxpayerIdentification:{constraints:[{type:"Pattern",params:{regex:"^(\\d{3}-\\d{2}-\\d{4}|\\d{9}|\\d{2}-\\d{7}|XXX-XX-XXXX|XX-XXXXXXX)$"}}]},UserSecurityCode:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:8,max:32}},{type:"Characters",params:{min:1}},{type:"Numbers",params:{min:1}}]},Frequency:{constraints:[{type:"Enum",params:{value:"Daily Weekly Monthly"}}]},Id:{constraints:[{type:"AlphaNumeric"},{type:"Min",params:{value:6}},{type:"Numbers",params:{min:1}}]},Money:{constraints:[{type:"Money"}]},OnOff:{constraints:[{type:"Boolean"}]},Password:{constraints:[{type:"NotBlank"},{type:"PasswordCharacters"},{type:"ConstraintSet",params:{constraints:[{type:"Characters",params:{min:1}},{type:"Numbers",params:{min:1}},{type:"PasswordSymbols",params:{min:1}}],min:2}},{type:"Length",params:{min:8,max:32}},{type:"NonConsecutiveAlphaNumerics",params:{maxSeqential:3}},{type:"NonRepeatingCharacters",params:{maxRepeating:2}}]},Payee:{constraints:[{type:"Length",params:{max:30}}]},Phone:{constraints:[{type:"PhoneNorthAmerica"},{type:"Length",params:{min:10,max:12}}]},Rate:{constraints:[{type:"Digits",params:{integer:0,fraction:2}},{type:"Range",params:{min:0,max:.99}}]},RoutingNumber:{constraints:[{type:"RoutingNumber"}]},UserId:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:8,max:32}},{type:"Characters",params:{min:1}},{type:"Numbers",params:{min:1}}]},RSAToken:{constraints:[{type:"Numeric"},{type:"Length",params:{min:6,max:35}}]},ProspectApplicantId:{constraints:[{type:"AlphaNumeric"},{type:"Length",params:{min:6}}]},List:{constraints:[]},Noop:{constraints:[]}}})),define("blue-app/validate/types",["require","exports","module","blue/object/extend","./standardTypes"],(function(e,t,n){"use strict";var r=e("blue/object/extend"),i=n.config().types;return r(e("./standardTypes"),i)})),define("blue-app/validate/var/ALPHA_REGEX",[],(function(){"use strict";return/^[A-Za-z]*$/})),define("blue-app/validate/var/ALPHA_NUMERIC_REGEX",[],(function(){"use strict";return/^[0-9A-Za-z]*$/})),define("blue-app/validate/var/ALPHA_NUMERIC_PLUS_REGEX",[],(function(){"use strict";return/^[a-zA-Z0-9.#&$/,:'\- ]*$/})),define("blue-app/validate/var/ADDRESS_LINE_REGEX",[],(function(){"use strict";return/^[a-zA-Z0-9.#&$/,:'\- ]{0,40}$/})),define("blue-app/validate/var/ZIP_CODE_REGEX",[],(function(){"use strict";return/^[0-9]{5}$/})),define("blue-app/validate/var/POSTAL_CODE_REGEX",[],(function(){"use strict";return/^[a-zA-Z0-9]{0,9}$/})),define("blue-app/validate/var/ZIP_CODE_EXTENSION_REGEX",[],(function(){"use strict";return/^([0-9]{4})?$/})),define("blue-app/validate/var/CITY_REGEX",[],(function(){"use strict";return/^[a-zA-Z0-9. ',-]{0,32}$/})),define("blue-app/validate/var/ANY_ALPHA_NUMERIC_REGEX",[],(function(){"use strict";return/[0-9A-Za-z]/g})),define("blue-app/validate/var/BOOLEAN_REGEX",[],(function(){"use strict";return/^(true|false)$/i})),define("blue-app/validate/var/EMAIL_REGEX",[],(function(){"use strict";return/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}?$/i})),define("blue-app/validate/var/INTEGER_REGEX",[],(function(){"use strict";return/^-?[0-9]*$/})),define("blue-app/validate/var/NAME_REGEX",[],(function(){"use strict";return/^[a-zA-Z\. '-]*$/})),define("blue-app/validate/var/NOT_AN_ALPHA_REGEX",[],(function(){"use strict";return/[^a-zA-Z]/g})),define("blue-app/validate/var/NOT_A_CAPITAL_REGEX",[],(function(){"use strict";return/[^A-Z]/g})),define("blue-app/validate/var/NOT_A_NUMBER_REGEX",[],(function(){"use strict";return/[^0-9]/g})),define("blue-app/validate/var/NOT_A_PASSWORD_SYMBOL",[],(function(){"use strict";return/[^!#$%+\/=@~]/g})),define("blue-app/validate/var/NOT_PHONE_EMAIL_REGEX",[],(function(){"use strict";return/^\d{10}@/})),define("blue-app/validate/var/NUMERIC_REGEX",[],(function(){"use strict";return/^[0-9]*$/})),define("blue-app/validate/var/REAL_REGEX",[],(function(){"use strict";return/^-?([0-9]+(\.[0-9]+)?|\.[0-9]+)$/})),define("blue-app/validate/var/REPEATING_SEQUENCE_REGEX",[],(function(){"use strict";return/(.)\1/})),define("blue-app/validate/var/URL_REGEX",[],(function(){"use strict";return/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!$&'()*+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|\/|\?)*)?$/i})),define("blue-app/validate/var/WHITESPACE_REGEX",["blue/util"],(function(e){"use strict";return new RegExp("["+e.string.WHITE_SPACES.join("")+"]","g")})),define("blue-app/validate/var/DEFAULT_DATE_FORMAT",[],(function(){"use strict";return"MM/DD/YYYY"})),define("blue-app/validate/var/PASSWORD_FORMAT",[],(function(){"use strict";return/^[A-Za-z0-9!#$%+/=@~]*$/})),define("blue-app/validate/var/PHONE_NORTH_AMERICA",[],(function(){"use strict";return/^\d{10}$|^\d{3}-\d{3}-\d{4}$/})),define("blue-app/validate/var/PHONE_OAO_FORMAT",[],(function(){"use strict";return/^(?!(?:012-?345-?6789|987-?654-?3210))(?:\d{3}(-?)\d{3}\1\d{4})$/})),define("blue-app/validate/var/SSN_FORMAT",[],(function(){"use strict";return/^\d{9}$|^\d{3}-\d{2}-\d{4}$/})),define("blue-app/validate/var/SSN_OAO_FORMAT",[],(function(){"use strict";return/^(?!9|000|666|123(-?)45\1{1}6789|([1-578])\2{2}(-?)\2{2}\3\2{4})\d{3}(-?)(?!00)\d{2}\4(?!0000)\d{4}$/})),define("blue-app/validate/var/SSN_VALID_GROUPS_FORMAT",[],(function(){"use strict";return/^(?!000|666|9|\d{3}(?:-?)00|\d{3}(-?)\d{2}\1(?:0000)).*$/})),define("blue-app/validate/var/SSN_EXCLUDE_FORMAT",[],(function(){"use strict";return/^(?!123(-?)45\1{1}6789|987(-?)65\2{1}4321).*$/})),define("blue-app/validate/var/CURRENCY_FORMATS",[],(function(){"use strict";return{USD:{decimal:".",decimalDigits:2,kDelim:",",symbol:"$",symbolBegin:!0,regex:/^\s*\$?((\d+|\d{1,3}(,\d{3})*)(\.\d{0,2})?|\.\d{1,2})\s*$/}}})),define("blue-app/validate/constraints",["require","exports","module","./var/ALPHA_REGEX","./var/ALPHA_NUMERIC_REGEX","./var/ALPHA_NUMERIC_PLUS_REGEX","./var/ADDRESS_LINE_REGEX","./var/ZIP_CODE_REGEX","./var/POSTAL_CODE_REGEX","./var/ZIP_CODE_EXTENSION_REGEX","./var/CITY_REGEX","./var/ANY_ALPHA_NUMERIC_REGEX","./var/BOOLEAN_REGEX","./var/EMAIL_REGEX","./var/INTEGER_REGEX","./var/NAME_REGEX","./var/NOT_AN_ALPHA_REGEX","./var/NOT_A_CAPITAL_REGEX","./var/NOT_A_NUMBER_REGEX","./var/NOT_A_PASSWORD_SYMBOL","./var/NOT_PHONE_EMAIL_REGEX","./var/NUMERIC_REGEX","./var/REAL_REGEX","./var/REPEATING_SEQUENCE_REGEX","./var/URL_REGEX","./var/WHITESPACE_REGEX","./var/DEFAULT_DATE_FORMAT","./var/PASSWORD_FORMAT","./var/PHONE_NORTH_AMERICA","./var/PHONE_OAO_FORMAT","./var/SSN_FORMAT","./var/SSN_OAO_FORMAT","./var/SSN_VALID_GROUPS_FORMAT","./var/SSN_EXCLUDE_FORMAT","./var/CURRENCY_FORMATS","blue/is","moment","blue/util","blue/util","blue/util","blue/util"],(function(e,t,n){"use strict";var r,i=e("./var/ALPHA_REGEX"),a=e("./var/ALPHA_NUMERIC_REGEX"),o=e("./var/ALPHA_NUMERIC_PLUS_REGEX"),s=e("./var/ADDRESS_LINE_REGEX"),u=e("./var/ZIP_CODE_REGEX"),c=e("./var/POSTAL_CODE_REGEX"),l=e("./var/ZIP_CODE_EXTENSION_REGEX"),p=e("./var/CITY_REGEX"),d=e("./var/ANY_ALPHA_NUMERIC_REGEX"),f=e("./var/BOOLEAN_REGEX"),m=e("./var/EMAIL_REGEX"),h=e("./var/INTEGER_REGEX"),g=e("./var/NAME_REGEX"),b=e("./var/NOT_AN_ALPHA_REGEX"),v=e("./var/NOT_A_CAPITAL_REGEX"),y=e("./var/NOT_A_NUMBER_REGEX"),E=e("./var/NOT_A_PASSWORD_SYMBOL"),x=e("./var/NOT_PHONE_EMAIL_REGEX"),C=e("./var/NUMERIC_REGEX"),S=e("./var/REAL_REGEX"),_=e("./var/REPEATING_SEQUENCE_REGEX"),w=e("./var/URL_REGEX"),A=e("./var/WHITESPACE_REGEX"),O=e("./var/DEFAULT_DATE_FORMAT"),R=e("./var/PASSWORD_FORMAT"),P=e("./var/PHONE_NORTH_AMERICA"),N=e("./var/PHONE_OAO_FORMAT"),T=e("./var/SSN_FORMAT"),I=e("./var/SSN_OAO_FORMAT"),k=e("./var/SSN_VALID_GROUPS_FORMAT"),F=e("./var/SSN_EXCLUDE_FORMAT"),D=e("./var/CURRENCY_FORMATS"),j=e("blue/is"),L=e("moment"),M=e("blue/util").string.toNumber,q=e("blue/util").object.toString,X=e("blue/util").string.typecast,B=e("blue/util").object.extend,U=n.config().constraints,G=function(e,t){var n,r;return j.defined(t.value)?n=r=X(t.value):(n=j.defined(t.min)?M(t.min):0,r=j.defined(t.max)?M(t.max):Number.MAX_VALUE),(e=M(e))>=n&&e<=r};return B(r={Alpha:{validator:function(e){return i.test(e)}},AlphaNumeric:{validator:function(e){return a.test(e)}},AlphaNumericPlus:{validator:function(e){return o.test(e)}},AddressLine:{validator:function(e){return s.test(e)}},PostalCode:{validator:function(e){return c.test(e)}},ZipCode:{validator:function(e){return u.test(e)}},ZipCodeExtension:{validator:function(e){return l.test(e)}},City:{validator:function(e){return j.singleSpaced(e)&&p.test(e)}},Date:{validator:function(e,t){if(0===q(e).length)return!0;var n=t.format||O;return L(e,n,!0).isValid()}},Boolean:{validator:function(e){return f.test(e)}},Blank:{validator:function(e){return""===q(e).replace(A,"")}},Capitals:{validator:function(e,t){return G(q(e).replace(v,"").length,t)}},Characters:{validator:function(e,t){return G(q(e).replace(b,"").length,t)}},ConstraintSet:{validator:function(e,t){var n=e;return G(t.constraints.reduce((function(e,t){return e+(0|r[t.type].validator(n,t.params))}),0),t)}},Date18YearsOld:{validator:function(e,t){var n=t.format||O,r=L(e,n,!0);return r.isValid()&&L().diff(r,"years")>17}},DateRange:{validator:function(e,t){var n=t.format||O,r=L(e,n,!0),i=r.isValid();if(i&&j.defined(t.value)&&(i=r.isSame(L(t.value,n,!0))),i&&j.defined(t.min)){var a=L(t.min,n,!0);i=r.isSame(a)||r.isAfter(a)}if(i&&j.defined(t.max)){var o=L(t.max,n,!0);i=r.isSame(o)||r.isBefore(o)}return i}},Digits:{validator:function(e,t){var n,r=!1;return n=(e=q(e).replace(A,"")).split(/\./),e.length>0&&(1===n.length&&(n[1]=""),r=!(t.integer>0)||n[0].length<=t.integer,t.fraction>0&&(r=r&&n[1].length<=t.fraction)),r}},Email:{validator:function(e){return m.test(e)}},NotPhoneEmail:{validator:function(e){return!x.test(e)}},Enum:{validator:function(e,t){return-1!==(j.string(t.value)?t.value.split(" "):j.array(t.value)?t.value:[]).indexOf(e)}},Future:{validator:function(e,t){var n=t.format||O,r=L(e,n,!0);return r.isValid()&&r.isAfter()||r.isSame()}},Integer:{validator:function(e){return h.test(e)}},ITINRange:{validator:function(e){var t=(e=q(e)).length<4?0:X(e.charAt(3),10);return e.length>4&&t>=7&&(t=10*t+X(e.charAt(4),10)),e.length<4||4===e.length&&t>=7||t>=70&&t<=88||t>=90&&t<=92||t>=94}},Length:{validator:function(e,t){return G(q(e).length,t)}},Max:{validator:function(e,t){return parseFloat(e)<=parseFloat(t.value)}},Min:{validator:function(e,t){return parseFloat(e)>=parseFloat(t.value)}},Money:{validator:function(e,t){return(t.currencyFormat||D[t.format||"USD"]).regex.test(q(e))}},MustBeginWith:{validator:function(e,t){return 0===(e=q(e)).length||e.charAt(0)===t.value}},NotBlank:{validator:function(e){return""!==e.replace(A,"")}},NotBeginWith:{validator:function(e,t){return 0===(e=q(e)).length||e.charAt(0)!==t.value}},NotBeginWith1:{validator:function(e){return r.NotBeginWith.validator(e,{value:"1"})}},NonConsecutiveAlphaNumerics:{validator:function(e,t){var n=e.split(""),r=e.length,i=t.maxSequential||t.maxSeqential,a=1;if(r<i)return!0;for(var o=0;o<r-1;++o){var s=n[o].toLowerCase().charCodeAt();if(s===n[o+1].toLowerCase().charCodeAt()-1&&(s>=48&&s<57||s>=97&&s<122)){if(++a===i)return!1}else a=1}for(o=r-1;o>=1;--o){if(n[o].charCodeAt()===n[o-1].charCodeAt()-1&&(s>48&&s<=57||s>97&&s<=122)){if(++a===i)return!1}else a=1}return!0}},NonRepeatingAlphaNumerics:{validator:function(e,t){for(var n="([a-z\\d])",r=0;r<t.maxRepeating;++r)n+="\\1";return!new RegExp(n,"gi").test(e)}},NonRepeatingCharacters:{validator:function(e,t){for(var n="(.)",r=0;r<t.maxRepeating;++r)n+="\\1";return!new RegExp(n,"gi").test(e)}},NonRepeatingSequence:{validator:function(e){return!_.test(e)}},Numbers:{validator:function(e,t){return G(q(e).replace(y,"").length,t)}},Numeric:{validator:function(e){return C.test(e)}},Past:{validator:function(e,t){var n=t.format||O,r=L(e,n,!0);return r.isValid()&&r.isBefore()||r.isSame()}},PasswordCharacters:{validator:function(e){return R.test(e)}},PasswordSymbols:{validator:function(e,t){return G(q(e).replace(E,"").length,t)}},Pattern:{validator:function(e,t){var n;return n=j.string(t.regex)?t.regex.replace(/^\//,"").replace(/\/$/,""):t.regex,(j.string(t.flags)?new RegExp(q(n).replace(/^\//,"").replace(/\/[^/]*$/,""),t.flags):new RegExp(n)).test(e)}},PersonalName:{validator:function(e){return g.test(e)}},Range:{validator:function(e,t){return G(e,t)}},Real:{validator:function(e){return S.test(e)}},Specials:{validator:function(e,t){return G(q(e).replace(d,"").length,t)}},Ssn:{validator:function(e){return T.test(e)}},SsnExclude:{validator:function(e){return F.test(e)}},SsnOao:{validator:function(e){return I.test(e)}},SsnValidGroups:{validator:function(e){return k.test(e)}},Step:{validator:function(e,t){var n=X(e),r=X(t.step);return G(n,t)&&n%r==0}},URL:{validator:function(e){return w.test(e)}},PhoneNorthAmerica:{validator:function(e){return P.test(e)}},PhoneOao:{validator:function(e){return N.test(e)}},RoutingNumber:{validator:function(e){for(var t=0,n=0,r=(e=q(e)).length;n<r;n+=3)t+=3*X(e.charAt(n),10)+7*X(e.charAt(n+1),10)+X(e.charAt(n+2),10);return 0!==t&&t%10==0}}},U)})),define("blue-app/validate/type",["require","./types","./constraints","blue/object/extend","blue/is","../settings","blue/util","blue/perf","blue/declare"],(function(e){"use strict";var t,n=Object.keys,r=e("./types"),i=e("./constraints"),a=e("blue/object/extend"),o=e("blue/is"),s=e("../settings"),u=e("blue/util").object.toString,c=e("blue/perf"),l=function(){t=""},p=function(){return t||(t=s.get("language")||s.get("contentLanguage")||"en-us",setTimeout(l,0)),t},d=e("blue/declare")({constructor:function(e,t){if(c.count("blue/validate/type","create",t),!o.array(e.constraints))throw new TypeError('Property "constraints" must be provided for type: '+t);this.name=t,a(!0,this,e),this.constraints.forEach((function(e){if(o.undefined(e.type))throw new TypeError('Property "type" is undefined for constraints within definition of type "'+this.name+'"');if(!o.defined(i[e.type]))throw new TypeError('Constraint "'+e.type+'" does not exist, and is being used by type "'+this.name+'"');if(!o.function(i[e.type].validator))throw new TypeError('Constraint "'+e.type+'" does not have a method "validator", and is being used by type "'+this.name+'"');e.params=e.params||{}}),this)},validator:function(e,t){var n=p();return c.count("blue/validate/type","validator"),this.constraints.every((function(r){return(i[r.type][n]||i[r.type]).validator(e,a(!0,{},r.params,t[r.type]||t))}),this)},validate:function(e,t){c.count("blue/validate/type","validate"),!o.array(e)&&!o.string(e)&&(e=u(e)||""),o.undefined(t)&&(t={});var n,r=this.constraints,s=p();return n=r.filter((function(n){return!(i[n.type][s]||i[n.type]).validator(e,a(!0,{},n.params,t[n.type]||t))})),{value:e,isValid:!n.length,validationName:this.name,validationParams:t,failedConstraints:n}}});return n(r).forEach((function(e){d[e]=new d(r[e],e)})),n(i).forEach((function(e){o.defined(d[e])||(d[e]=new d({constraints:[{type:e,params:{}}]},e))})),d})),define("blue-app/validate",["./validate/validator","./validate/type"],(function(e,t){"use strict";return new e(t)})),define("blue-app/component/validator",["blue-app/validate","blue/is","blue-app/validate/type"],(function(e,t,n){"use strict";return{validate:function(n,r,i,a){var o,s,u,c;return this.isBuiltInType(r)?s=e.validate(n,r,i):t.string(r)&&(u=e.validate(n,r,i)),o=s||u||e.validate("","Noop"),t.plainObject(a)&&t.defined(a.validator)&&(c=a.validator.validate(n)),o.isValid&&t.defined(c)&&(o.isValid=c.isValid),t.defined(o.failedConstraints)&&t.defined(c)&&(o.failedConstraints=o.failedConstraints.concat(c.failedConstraints)),o},getInstance:function(){return e},isBuiltInType:function(t){return e.types.has(t)},createType:function(e,t){return new n(e,t)},composeValidators:function(e,n,r){var i=n.type||"Noop",a=n.constraints||null,o=r.name+"_"+e+"_"+i;if(n.isBuiltInType=this.isBuiltInType(i),a&&(n.validator=this.createType({constraints:a},o)),"list"===i.toString().toLowerCase()){if(t.string(n.itemType))return;t.plainObject(n.itemType)&&this.composeValidators(e,n.itemType,r),t.plainObject(n.items)&&Object.keys(n.items).forEach(function(e){e&&t.plainObject(n.items[e])&&this.composeValidators(e,n.items[e],r)}.bind(this))}}}})),define("blue-app/component",["require","blue/root","blue/as/contextual","blue/as/serializable","blue/compose","blue/event/channel","blue/log","blue/is","blue/event/lifecycle","./localeSettings","blue/util","blue/observable","blue/perf","./component/validator"],(function(e){"use strict";var t=Object.create.bind(Object,null),n=Object.defineProperty,r=Object.defineProperties,i=Object.keys,a=e("blue/root"),o=e("blue/as/contextual"),s=e("blue/as/serializable"),u=e("blue/compose"),c=e("blue/event/channel"),l=e("blue/log"),p=e("blue/is"),d=e("blue/event/lifecycle"),f=e("./localeSettings"),m=e("blue/util").object.map,h=e("blue/observable"),g=e("blue/perf"),b=e("./component/validator"),v=l("[blue:app]"),y=e.specified("blue-legacy/blue-app/config")&&a.require("blue-legacy/blue-app/component"),E=0,x=function(e,t){switch(arguments.length){case 1:return this[e];case 2:return this[e]=t;case 0:i(this).forEach((function(e){delete this[e]}),this)}},C=function(e,t){var n,r,i=e.split(".")[0],a=this._("listeners")[i]||{};for(n in a){r=a[n];try{r.h.call(r.s,t,e)}catch(e){v.error("["+this.context.getStack()+"]",'Calling "'+i+'" data-change listener',e)}}},S=function(e,t){({actions:1,data:1,key:1,model:1,name:1,settings:1,spec:1,states:1,destroy:1,destroyView:1,disable:1,enable:1,getDataProperties:1,getActionNames:1,getSettingsValues:1,on:1,onData:1,validate:1})[e]&&v.error("["+t.getStack()+"]","Reserved property being overwritten",e)},_=function(e){try{p.function(this[e])&&this[e]()}catch(t){v.error("["+this.context.getStack()+"]",'Executing-Action "'+e+'()"',t)}},w=function(e,t){var n;S(e,this.context),(n=Object.getOwnPropertyDescriptor(this,e))&&(n.get||n.set)&&v.error("["+this.context.getStack()+"]",t.type+' "'+e+'" already defined',n),t.undef&&e in this&&v.error("["+this.context.getStack()+"]",t.type+' "'+e+'" already set',this[e])},A=function(e,t,n){var r;this._fromBridge!==e&&(this._("enabled")||this._queueData)&&(r=g.count.call({bucket:"render"},"blue/component","emit",this.name,e),this.privateOutput.emit("data",{value:e,path:t,current:n}),r())},O={descriptor:{set:function(e){this._("actions",t()),i(e).forEach(O.init,this),delete this.actions},configurable:!0,enumerable:!1},setter:function(e,t){var n=this,r=n._("actions"),i=r[e];if(!p.function(t))throw new TypeError(e+" must be a function");i&&!i.temp&&v.error("["+n.context.getStack()+"]",'Action "'+e+'()" already set',i,t),r[e]=function(){var r,i=a.location?a.location.href:"",o=arguments[arguments.length-1]||{};n.actionRunning={value:e,action:e,nonCustomerEvent:void 0===o.nonCustomerEvent||o.nonCustomerEvent,args:arguments,url:i};try{r=t.apply(n,arguments)}catch(t){v.error("["+n.context.getStack()+"]",'Executing-Action "'+e+'()"',t)}return delete n.actionRunning,n.privateOutput&&n.privateOutput.emit("action",{value:e,action:e,nonCustomerEvent:void 0===o.nonCustomerEvent||o.nonCustomerEvent,args:arguments,result:r,url:i}),r}},init:function(e){var t=this,r=t[e],i=function(){throw new TypeError("Component "+t._("id")+': Action "'+e+'()" is undefined')};w.call(t,e,{type:"Action"}),i.temp=!0,t._("actions")[e]=i,n(t,e,{get:function(){return t._("actions")[e]},set:function(n){return O.setter.call(t,e,n)},configurable:!0,enumerable:!0}),r&&(t[e]=r)}},R={descriptor:{set:function(e){i(e).forEach((function(t){R.init.call(this,t,e[t])}),this),delete this.data},configurable:!0,enumerable:!1},validate:function(e,t,n,r,a){var o,s=this,u=[],c=e.type||"Noop",l=e.params||{},d=r.split(".").pop();switch(c){case"NoConstraint":break;case"List":if(!p.array(a))return b.validate(a,"Noop",l);p.plainObject(e.items)?a.forEach((function(n,a){i(e.items).forEach((function(i){if(i in n){var o=e.items[i];u=u.concat(R.validate.call(s,{type:o.type||o,params:o.params||{},constraints:o.constraints,validator:o.validator},t,a,r+"."+a+"."+i,n[i]))}}))})):p.string(e.itemType)&&a.forEach((function(n,i){u=u.concat(R.validate.call(s,{type:e.itemType,params:l,constraints:e.constraints,validator:e.validator},t,i,r+"."+i,n))})),a.isValid=!u.length,a.validation=u;break;default:try{g.count("blue/component","validate",this.name,r),o=b.validate(a,c,l,e)}catch(e){v.warn("["+s.context.getStack()+"]",'Unable to validate Data "'+r+'"',e),o=b.validate(a,"Noop",l)}if(void 0===n)return o;o.isValid||u.push({property:d,index:n,dataPath:r,result:o})}return u.isValid=!u.length,u},onChange:function(e,t,n){var r=this._("data")[e],i=this._("ds");r.validated=!1,i&&!(e in i)||A.call(this,e,t,n)},setter:function(e,t){var n=e.split(".")[0],r=n!==e,i=this._("data")[n];r&&!this.model.get(n)&&"LIST"===i.definition.type&&(this._ignore=e,this.model.set(n,[]),delete this._ignore),this.model.set(e,t,{isolate:!0})},init:function(e,r){var i,a=this;if(w.call(a,e,{type:"Data",undef:1}),a._("data")[e]=i=t(),p.object(r)||(v.warn("["+a.context.getStack()+"]","Data item,","'"+e+"',","invalid object definition"),r={type:"noop"}),r.type&&!p.string(r.type))throw new TypeError("data type for property "+e+" must be a string, not "+typeof r.type);b.composeValidators(e,r,{name:a.key}),n(a,e,{get:function(){return a.model.get(e,{isolate:!0})},set:function(t){return R.setter.call(a,e,t)},configurable:!0,enumerable:!0}),i.definition=r,i.isValid=!0,i.validationResults=[]}},P={descriptor:{get:function(){return this._("name")},set:function(e){if(!p.string(e))throw new TypeError("name must be a string");if(this._("name"))throw new Error("name can only be set once");this._("name",e),this._("id","<#"+e+":"+ ++E+">"),this.context.componentName=this.context.name=e,g.count.call({id:this._("id"),ref:this,time:1},"blue/component","create",this.name)},configurable:!0,enumerable:!1}},N={descriptor:{set:function(e){!e._init&&(e._init=!0)&&f.addSettingsToModel({spec:{name:this.name,settings:e},component:this}),this._("settings",e),i(e).forEach((function(t){"_init"!==t&&N.init.call(this,t,e[t].value)}),this),delete this.settings},configurable:!0,enumerable:!1},newKind:function(){var e=this._("settings")||{},t=this.model;f.addSettingsToModel({spec:{name:this.name,settings:e},component:this}),this._("settings",e),t&&i(e).forEach((function(n){"_init"!==n&&t.set(n,e[n].value)}))},reset:function(){var e=this.model,t=e&&e.get()||{},n=this._("settings")||{};i(n).forEach((function(e){"_init"!==e&&void 0===t[e]&&(t[e]=n[e].value)}))},init:function(e,t){var r=this;w.call(r,e,{type:"Setting",undef:1}),r.model.set(e,t),n(r,e,{get:function(){return r.model.get(e)},set:function(t){return r.model.set(e,t)},configurable:!0,enumerable:!0})}},T={descriptor:{set:function(e){this._("states",e),i(e).forEach(T.init,this),delete this.states},configurable:!0,enumerable:!1},init:function(e){var t=this;w.call(t,e,{type:"State",undef:1}),n(t,e,{get:function(){return t.model.get(e)},set:function(n){return t.model.set(e,n)},configurable:!0,enumerable:!0})}},I={descriptor:{get:function(){return this._("model")},set:function(e){var n,r=this._("model");e&&e===r||((n=r&&r.lens)&&r.destroy(),null==e&&(e=t()),p.function(e.lens)?(e.destroyed&&(v.error("["+this.context.getStack()+"]","Tried to create-component with destroyed model"),e=h.Model({},{skipRepeats:!0})),r=e):r=h.Model(e,{skipRepeats:!0}),r.onValue(I.onChange,{initial:!1,scope:this,isolate:!0}),this._("model",r),n&&I.reset.call(this))},configurable:!0,enumerable:!1},onChange:function(e,t){var n=t.split(".")[0],r=n in this,i=e&&e[n];if(e&&!n&&(I.reset.call(this),v.warn("["+this.context.getStack()+"]","Component properties should be used in favor of setting directly on internal model")),r&&!this._ignore){if(n in(this._("data")||{}))R.onChange.call(this,n,t,i);else if(n in(this._("settings")||{}))A.call(this,n,n,i);else{if(!(n in(this._("states")||{})))return;A.call(this,n,n,i)}C.call(this,t,i)}},reset:function(){var e;N.reset.call(this),(this._("enabled")||this._queueData)&&(e=g.count.call({bucket:"render"},"blue/component","emit",this.name,"reset"),this.privateOutput.emit("reset",{value:"data",current:this.model.get({isolate:!0})||{}}),e())}};function k(){var e=this;e.privateOutput&&e.privateOutput.asEventStream().end(),e.privateOutput&&e.privateOutput.destroy(),e.privateOutput=new c({eventTarget:e});var t=this.privateOutput.asEventStream(),n=t.onValue((function(t){e._("enabled")||e._("queue").push(t)}));t.onEnd(n)}var F=function(e){var n=this,i={enabled:!1,hasView:!1,installedHandlers:{},listeners:{},queue:[],data:t()};n._=x.bind(i),n.initialized=!1,n.defineContext(e),r(n,{actions:O.descriptor,data:R.descriptor,model:I.descriptor,name:P.descriptor,settings:N.descriptor,states:T.descriptor}),n.key="",n.output=new c({eventTarget:n});var a=n.output.asEventStream(),o=a.onValue((function(e){n._("enabled")||n._("queue").push(e)}));a.onEnd(o),k.call(n)};return F.create=function(e,t,a){if(a.legacy&&y)return y.create.apply(0,arguments);var o,s,c=new F(t),d=a.spec.states||(a.spec.states={}),f=["actions","data","settings","states"];for(c.key=e,c.model=a.model,c.kind=a.kind,a.viewEngine&&(c.context.viewEngine=a.viewEngine),c._("keepAlive",a.keepAlive),c._("modelCleanup",a.modelCleanup),p.function(a.methods)?a.methods.call(c,c.context):p.plainObject(a.methods)&&i(a.methods).forEach((function(e){S(e,c.context),c[e]=a.methods[e]})),d.v=1,c.context.logger=l("[component:"+a.spec.name+"]"),u(c,a.spec),r(c,{__hasView:{get:function(){return v.warn("["+this.context.getStack()+"]",'DEPRECATED:BLUEJS-2918:Property: "__hasView" has been deprecated.'),this._("hasView")}},__instanceName:{get:function(){return v.warn("["+this.context.getStack()+"]",'DEPRECATED:BLUEJS-2918:Property: "__instanceName" has been deprecated. Use "key"'),this.key}},spec:{get:function(){return a.spec}}}),["__viewName","__enabled"].forEach((function(e){n(c,e,{get:function(){var t=this._(e.replace(/[^a-z]/gi,""));return v.warn("["+this.context.getStack()+"]",'DEPRECATED:BLUEJS-2918:Property: "'+e+'" has been deprecated.',t),t}})}));o=f.pop();)delete c[o];return c.initialized=!0,c.onInit?_.call(c,"onInit"):c.init&&_.call(c,"init"),c.privateOutput.emit("init",{}),_.call(c,"onComplete"),c.privateOutput.emit("complete",{}),s=c.kind,n(c,"kind",{get:function(){return s},set:function(e){e!==s&&(s=e,N.newKind.call(c))}}),c.context.on("blue:content:reload",(function(){N.newKind.call(c)})),c},F.prototype=t(),F.prototype.constructor=F,F.prototype.destroy=function(){var e,t,n=this;return e=new d({type:"component",action:"destroy",stage:"begin",name:n.context&&n.context.name}),n.context&&n.context.bubble(e.msgType,e),n.actionRunning&&n.privateOutput&&n.privateOutput.emit("action",n.actionRunning),n.privateOutput&&n.privateOutput.emit("destroy",{}),n.destroyed=!0,new Promise((function(e,t){n.disable(e,t,!0)})).catch((function(){})).then((function(){n.model&&n.model.destroy(n._("modelCleanup")&&n.context),n.context&&n.context.bubble("removeComponent",{name:n.key}),n.output&&n.output.destroy(),n.privateOutput&&n.privateOutput.destroy(),delete n.output,delete n.privateOutput,_.call(n,"onDestroy"),t=new d({type:"component",action:"destroy",stage:"end",name:n.spec.name,beginEventName:e.eventName}),n.context&&n.context.bubble(t.msgType,t),n.context&&n.destroyContext(),g.count.call({id:n._("id")},"blue/component","destroy",n.name),n._()}))},F.prototype.destroyView=function(e,t){var n,r=this._("installedHandlers");if(this._("hasView")){if(this._("hasView",!1),p.array(r.destroy))for(;n=r.destroy.pop();)n();this.privateOutput&&this.privateOutput.emit("destroyView",{compDestroyResolve:e,compDestroyReject:t})}},F.prototype.disable=function(e,t,n){var r,a,o=this._("installedHandlers");this._("hasView")?this.destroyView(e,t):e&&e(),this._("enabled")&&(o.outputUnplugger&&o.outputUnplugger(),delete o.outputUnplugger,!n&&k.call(this),this._("enabled",!1),this.input=void 0,i(o).forEach((function(e){if(r=o[e],p.function(r))r();else if(p.array(r))for(;a=r.pop();)p.function(a)&&a();delete o[e]})))},F.prototype.enable=function(e){var t,n,r=this,i=r._("queue"),a=r._("installedHandlers");if(!r.destroyed){for(r.disable(),r.input=e,a.trigger=r.input.on("trigger",(function(e){var t=e.value;if(r[t])try{e.data&&e.data.constructor===Array?r[t].apply(r,e.data):r[t].call(r,e.data)}catch(e){v.error("["+r.context.getStack()+"]","Action: "+t+"()",e)}else v.error("["+r.context.getStack()+"]","Action: "+t+"() does not exist in spec")})),a.binding=r.input.on("binding",(function(e){var t=e.value.split(".")[0];t in r?(r._fromBridge=e.value,R.setter.call(r,e.value,e.data),delete r._fromBridge):v.error("["+r.context.getStack()+"]","Property: "+t+" does not exist in spec")})),a.bindingInit=r.input.on("init",(function(e){r._("ds",e.downstream)})),a.destroy=r.input.on("destroy",(function(){r._("hasView",!1),r._("keepAlive")?r.disable():r.destroy()})),a.ready=r.input.on("ready",(function(){r._("hasView",!0),r.privateOutput.emit("ready",{componentName:r.name,componentInstanceName:r.key||"",componentId:r._("id"),viewName:r._("viewName")||""}),_.call(r,"onReady")})),r._("enabled",!0),a.outputUnplugger=r.output.plug(r.privateOutput.asEventStream()),r.privateOutput.emit("componentInputReady"),t=g.count.call({bucket:"render"},"blue/component","emit",r.name,"enable");i.length;)"binding"!==(n=i.shift()).type&&r.output.emit(n);t(),delete r._queueData}},F.prototype.onData=function(e,t,n){var r="n"+E++,i=this._("listeners"),a=e.split(".")[0],o=n||{},s={h:t,s:o.context||this},u=i[a]||(i[a]={});if(u[r]=s,!("init"in o)||o.init)try{s.h.call(s.s,this[a],a)}catch(e){v.error("["+this.context.getStack()+"]",'Calling "'+a+'" data-change listener',e)}return function(){delete u[r]}},F.prototype.validate=function(e){var t=this,n=this._("data"),r=t.model,a={isValid:!0,updated:{},passed:{},failed:{}};return(e?p.array(e)?e:e in n?[e]:[]:i(n)).forEach((function(e){var i,o=n[e]||{},s=o.definition||{};!{Noop:1,NoConstraint:1}[s.type||"Noop"]||s.validator?o.validated?i=o.isValid:(o.validationResults=R.validate.call(t,s,e,void 0,e,r.get(e)),o.isValid=i=o.validationResults.isValid,o.validated=!0,a.updated[e]=!0):o.isValid=i=!0,a.isValid&=i,a[i?"passed":"failed"][e]=o.validationResults})),a},F.prototype.getSettingsValues=function(){var e={},t=this._("settings");return t&&i(t).forEach((function(t){e[t]=this.model.get(t)}),this),e},F.prototype.getActionNames=function(){var e={},t=this._("actions");return t&&i(t).forEach((function(t){e[t]=1}),this),e},F.prototype.on=function(e,t){var n,r;this._("enabled")&&(!p.string(e)&&p.object(e)?m(e,(function(t,i){(n=i.split("/")).unshift(this.name),r=n.join("/"),e[r]=t,delete e[i]}),this):((n=e.split("/")).unshift(this.name),e=n.join("/")),this.output.on(e,t))},s.call(F.prototype,(function(){return{CompID:this._("id")||"empty id",specName:this.name||"no spec name",model:this.model.toJSON(this.spec.data).model||"empty model"}})),F=o.call(F,{name:"component"})})),define("blue-app/service/interceptor/header",["require","blue/store/enumerable/session"],(function(e){"use strict";var t=new(e("blue/store/enumerable/session"))("servicesettings");return{before:function(e){return e.header=t.get("serviceheader")||{},e}}})),define("blue-app/service/interceptor/error",["require","blue/log"],(function(e){"use strict";var t=e("blue/log")("[blue:app]"),n=function(e,t,n,r){var i={},a={value:r||"",request:t,response:n},o=e.util.object.deepClone;e.application.broadcast("serviceError",a),(i=o(a)).code="blue:error:service:requestFailed",e.bubble(i.code,i)};return{around:function(e){var r=function(){},i=e.args[0],a=e.target.context,o=!!i.disableDefaultError,s=i.retryStatusCodes,u=i.retryHeader;return new Promise((function(c,l){e.proceed().then((function(e){c(e)})).catch((function(e){var c,p,d,f,m=e instanceof Error;!m&&Array.isArray(s)&&s.indexOf(e.status)>=0&&e.getResponseHeader(u)?l(e):(m?(t.error("["+a.getStack()+"]","service response error",e),o||n(a,i,e)):(c=(e=e||{getResponseHeader:r}).status,d=e.statusText,p=e.getResponseHeader("Support-Id"),f=e.getResponseHeader("Alt-Location"),t[401===c||0===c?"warn":"error"]("["+a.getStack()+"]","service request failed",i.url,c,d,p?"SupportId: "+p:""),(!o||f||function(e){return 401===e.status||!!(403===e.status&&e.responseJSON&&e.responseJSON.attributes&&e.responseJSON.attributes.userType&&"FinancialAdvisor"===e.responseJSON.attributes.userType)}(e))&&(!e.status||e.status<300||e.status>399||f)&&n(a,i,e,c)),f||l(e))})).catch((function(e){t.error("["+a.getStack()+"]","service request catch error",e),l(e)}))}))}}})),define("blue-app/service/interceptor/cache",["require","blue/deferred","blue/util"],(function(e){"use strict";var t={},n=e("blue/deferred"),r=e("blue/util").object.deepClone,i={DELETE:1,ONCE:1,SESSION:1},a=function(e,t){var n,r=Object.keys(e||{}),i=Object.keys(t||{});if(r.length!==i.length)return!1;if(!r.length)return!0;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(e[n]!==t[n])return!1;return!0},o=function(e,n,i,o){for(var s,u=t[o]&&t[o][e]||[],c=u.length;c--;)if(s=u[c],a(n,s.request))return i||"ONCE"!==s.usage||(u.splice(c,1),!u.length&&delete t[o][e]),r(s.response)},s=function(e,n,r){var i,o,s,u=n.response&&"DELETE"!==n.usage,c=n.request||{};for(u&&(t[r]||(t[r]={}),t[r][e]||(t[r][e]=[])),s=(o=t[r][e]||[]).length;s--;)if(i=o[s],a(c,i.request))return void(u?o[s]=n:(o.splice(s,1),!o.length&&delete t[r][e]));u&&o.push(n)},u=function(e){return new Promise((function(t){setTimeout((function(){t(e)}),0)}))},c=function(e,t,n){var r,a,o,u=(t||{})[e];if(u&&u.constructor===Array&&(r=u.length))for(;r--;)(o=u[r]||{}).url&&o.response&&i[o.usage]&&(a=o.url.split("?")[0],s(a,o,n))};return{around:function(e){var t,r=e.args[0],a=r.url.split("?")[0],l=r.data||{},p=r.method||r.type||"GET",d=r.cachePropName||"cache",f=i[r.cacheResponse]&&r.cacheResponse,m=r.cacheData,h=m&&m.usage&&i[m.usage]?m.usage:void 0,g=h&&m.response;if(h)return g&&g[d]?c(d,g,p):s(a,{usage:h,request:l,response:g},p),u(g);if(f&&!o(a,l,!0,p))t=new n,s(a,{usage:f,request:l,response:t.promise},p);else if(g=o(a,l,!1,p))return u(g);return e.proceed().then((function(e){return c(d,e,p),f&&(s(a,{usage:f,request:l,response:e},p),t.resolve(e)),e})).catch((function(e){throw f&&(s(a,{usage:"DELETE",request:l},p),t.reject(e)),e}))}}})),define("blue-app/with/serviceConfigAPI",[],(function(){"use strict";var e=Object.defineProperty;return function(){var t,n=[];e(this,"disableServiceAPI",{value:function(){delete this.serviceInterceptors},writable:!1,configurable:!0,enumerable:!1}),t=this.serviceSettings||void 0,e(this,"serviceSettings",{get:function(){return this.context.serviceSettings},set:function(e){this.context.serviceSettings=e},configurable:!0,enumerable:!1}),t&&(this.serviceSettings=t),e(this,"serviceInterceptors",{set:function(e){n=e.slice()},configurable:!0,enumerable:!1}),e(this.context,"getServiceInterceptors",{value:function(e){var t=[],r=[],i=this,a=e&&Object.getPrototypeOf(e).interceptors||[];return Object.prototype.hasOwnProperty.call(this,"serviceSettings")&&this.serviceSettings.interceptors&&(r=this.serviceSettings.interceptors.concat()),i.parent&&Object.prototype.hasOwnProperty.call(i.parent,"getServiceInterceptors")&&(t=i.parent.getServiceInterceptors()),t=t||[],n.reverse().concat(r.reverse()).concat(t).concat(a.reverse())},configurable:!0,enumerable:!1,writable:!1})}})),define("blue-app/service",["require","exports","module","blue/as/constructable","blue/as/contextual","blue/as/serializable","blue/log","./service/interceptor/header","./service/interceptor/error","./service/interceptor/cache","blue/is","./settings","blue/intercept","blue/http","blue/util","mout/object/mixIn","mout/random/guid","blue/store/enumerable/session","blue/store/enumerable/cookie","blue/root","blue/perf","blue-app/with/serviceConfigAPI"],(function(e,t,n){"use strict";var r=Object.create.bind(Object,null),i=e("blue/as/constructable"),a=e("blue/as/contextual"),o=e("blue/as/serializable"),s=e("blue/log"),u=e("./service/interceptor/header"),c=e("./service/interceptor/error"),l=e("./service/interceptor/cache"),p=e("blue/is"),d=e("./settings"),f=e("blue/intercept"),m=e("blue/http"),h=e("blue/util").object.deepClone,g=e("mout/object/mixIn"),b=e("mout/random/guid"),v=new(e("blue/store/enumerable/session"))("servicesettings"),y=new(e("blue/store/enumerable/cookie"))(null,!0),E=e("blue/root").channel,x=e("blue/perf"),C=e("blue-app/with/serviceConfigAPI"),S=Object.prototype.hasOwnProperty,_=n.config(),w=_&&_.CSRF||{},A=s("[blue:app]"),O=0,R=0;"undefined"!==E&&"string"==typeof E||(E=!1),E&&(E="id="+E),w.header=w.header||"x-jpmc-csrf-token",w.cookie=w.cookie||"authcsrftoken";var P=function(e,t){this.name=e,this.id="<"+e+"Service:"+O+++">",this.defineContext(t,{name:e,logger:s("[service:"+e+"]")}),this.defineConstruct(this.context),this.defineInterceptors(),C.call(this),Object.defineProperty(this,"serviceCalls",{set:function(e){for(var t,n=Object.keys(e),r=0,i=n.length;r<i;r++)t=n[r],this.addServiceCall(t,e[t].settings)},configurable:!0,enumerable:!1}),p.function(this.init)&&this.init.call(this),this._appliedLocalInterceptors=!1,x.count.call({id:this.id,ref:this},"blue/service","create",e)};return P.prototype=r(),P.prototype.constructor=P,P.prototype.http=m,P.prototype.interceptors=[u,c,l],P.prototype.addServiceCall=function(e,t){var n=this;p.undefined(this._serviceCalls)&&(this._serviceCalls=r()),this._serviceCalls[e]=r(),this.settings(e,t),this[e]=function(t,r){var i,a,o,s=n._serviceCalls[e];if(R++,i=R,p.undefined(s.settings)){var u=h(n.context.serviceSettings)||{};for(o in n._appliedLocalInterceptors||(!function(e,t){var n=e.length,r=0;if(n!==t.length)return!1;for(;r<=n;r++)if(e[r]!==t[r])return!1;return!0}(n._interceptors,Object.getPrototypeOf(n).interceptors)?n.interceptors=n._interceptors.concat(n.context.getServiceInterceptors(n)).reverse():n.interceptors=n.context.getServiceInterceptors(n).reverse(),n._appliedLocalInterceptors=!0),s.settings=n._serviceCalls[e].settings=u,s.defaults)S.call(s.defaults,o)&&(s.settings[o]=n._serviceCalls[e].settings[o]=s.defaults[o]);delete n._serviceCalls[e].defaults}return a=g({},s.settings,r||{}),n.prerequest(a,t),n.context.bubble("blue:service:serviceCallBegin",{msgType:"blue:service:serviceCallBegin",contextPath:n.context.getStack(),id:i,service:n.name||"",serviceCall:e,application:n.context.application&&n.context.application.name||"",area:n.context.area&&n.context.area.name||"",controller:n.context.controller&&n.context.controller.name||""}),new Promise((function(t,r){n.request(a).then((function(r){n.context.bubble("blue:service:serviceCallComplete",{msgType:"blue:service:serviceCallComplete",contextPath:n.context.getStack(),id:i,service:n.name||"",serviceCall:e,application:n.context.application&&n.context.application.name||"",area:n.context.area&&n.context.area.name||"",controller:n.context.controller&&n.context.controller.name||""}),t(r)})).catch((function(t){n.context.bubble("blue:service:serviceCallComplete",{msgType:"blue:service:serviceCallComplete",contextPath:n.context.getStack(),service:n.name||"",serviceCall:e,application:n.context.application&&n.context.application.name||"",area:n.context.area&&n.context.area.name||"",controller:n.context.controller&&n.context.controller.name||""}),r(t)}))}))}},P.prototype.destroy=function(){for(var e,t=Object.keys(this._serviceCalls),n=t.length;n--;)delete this[e=t[n]],delete this._serviceCalls[e];this.destroyConstruct(),this.destroyInterceptors(),this.destroyContext(),delete this._serviceCalls,delete this.serviceCalls,this.addServiceCall=this.destroy=this.prerequest=this.request=function(){},x.count.call({id:this.id},"blue/service","destroy",this.name)},P.prototype.prerequest=function(e,t){var n,i,a,o;return e.data=t||r(),0!==e.url.substr(0,4).toLowerCase().indexOf("http")&&(n=v.get("serviceFQDN"),e.url=n?n+e.url:e.url),w.token=y.get(w.cookie)||null,w.token&&d.set(w.cookie,w.token),a=(i=!(!w.disable&&!e.disableCsrf))||e.disableTrace,o=i||e.disableChannelId,e.headers=e.headers||{},a?a&&e.headers&&delete e.headers["x-jpmc-client-request-id"]:e.headers["x-jpmc-client-request-id"]=b(),!o&&E?e.headers["x-jpmc-channel"]=E:o&&e.headers&&delete e.headers["x-jpmc-channel"],i?i&&e.headers&&delete e.headers[w.header]:e.headers[w.header]=w.token||"NONE",e},P.prototype.request=function(e){return x.count("blue/service","request",e.url),new Promise(function(t,n){this.http.request(e).then((function(e){t(e)})).catch(function(t){A.warn("["+this.context.getStack()+"]","Service request failed (url:"+e.url+"; status:"+t.status+"; statusText:"+t.statusText+")"),n(t)}.bind(this))}.bind(this))},P.prototype.settings=function(e,t){var n;if(!(e in this._serviceCalls))throw new Error('service "'+e+'" does not exist');if(p.undefined(t))n=this._serviceCalls[e].defaults||this._serviceCalls[e].settings;else{if(!("url"in t))throw new Error('"url" is a required setting');this._serviceCalls[e].defaults=t,"settings"in this._serviceCalls[e]&&delete this._serviceCalls[e].settings}return n},o.call(P.prototype,(function(){return{id:this.id||"empty id"}})),i.call(P.prototype),P=a.call(P,{name:"service"}),f.withInterceptors.call(P.prototype,"request"),P})),define("blue-app/with/locationAPI",["require","blue/util","blue/log"],(function(e){"use strict";return function(){e("blue/util").object.map,e("blue/log")("[app]");this.changeProtocol=function(e){var t=document.location.href,n=document.location.protocol;document.location=encodeURI(t.replace(n,e))},this.changeServer=function(e){var t=document.location.href,n=document.location.host;document.location=encodeURI(t.replace("//"+n+"/","//"+e+"/"))},this.getLocationPath=function(){return document.location.pathname},this.getLocationProtocol=function(){return document.location.protocol},this.getLocationProtocolAndServer=function(){return document.location.origin},this.getLocationServer=function(){return document.location.host},this.getLocationURL=function(){return document.location.href},this.goURL=function(e,t){var n,r,i;if(t){if(!t.windowName)throw new TypeError('"windowName" is undefined');return n=t.windowName,r=Object.keys(t).length>1?(i=t,Object.keys(i).filter((function(e){return"windowName"!=e})).map((function(e){return i[e]?e+"="+i[e]:e})).join(",")):void 0,window.open(e,n,r)}setTimeout((function(){document.location=e}),0)}}})),define("blue-app/mvc/mapper/mapping",["blue/declare","blue/is"],(function(e,t){"use strict";return e({constructor:function(e){if(this.mapping=e,t.undefined(this.mapping))throw new TypeError('"mapping" is undefined')},lookup:function(){if(t.function(this.mapping.lookup))return this.mapping.lookup.apply(this.mapping,arguments);throw new TypeError('"mapping.lookup()" is not a function')},toString:function(){return" Mapping "}})})),define("blue-app/mvc/mapper",["require","blue/is","./mapper/mapping","blue/compose","blue/intercept","blue/declare","blue/log"],(function(e){"use strict";var t=e("blue/is"),n=e("./mapper/mapping"),r=e("blue/compose"),i=e("blue/intercept"),a=e("blue/declare"),o=e("blue/log")("[blue:app]"),s=function(e){return new n(e)};return a((function(){var e={constructor:function(){var e,t,n;if(arguments.length){for(e=[this],t=0;t<arguments.length;t++)e.push(arguments[t]);r.apply(r,e)}Object.defineProperty(this,"mappings",{get:function(){return n},set:function(e){n=e.map(s)},enumerable:!0}),this.defineInterceptors()},destroy:function(){this.destroyInterceptors()},mapRequest:function(){var e,n,r=arguments,i=!1;return this.mappings&&this.mappings.length&&("IdentityMapping"!==(e=this.mappings[this.mappings.length-1].mapping.toString())&&"ControllerNameMapping"!==e&&o.warn("'IdentityMapping' or 'ControllerNameMapping' should succeed all other route mappings."),this.mappings.some((function(e){return n=e.lookup.apply(e,r),t.defined(n)&&(n=n.split(",").map((function(e){return e.trim()})),i=n.length>0),i}),this)),n},toString:function(){return" Mapper "}};return i.withInterceptors.call(e,"mapRequest"),e}))})),define("blue-app/routeHandler",["blue/declare","blue-app/mvc/mapper"],(function(e,t){"use strict";return e(t,{constructor:function(){t.apply(this,arguments),this.childTypes=this.childTypes||[]}})})),define("blue-app/mvc/handler/mapping/controllerName",["blue/declare"],(function(e){"use strict";return e({constructor:function(){},lookup:function(e){return e},toString:function(){return"ControllerNameMapping"}})})),define("blue-app/mvc/mapper/mapping/identity",["blue/declare"],(function(e){"use strict";return e({constructor:function(){},lookup:function(e){return e},toString:function(){return"IdentityMapping"}})})),define("blue-app/mvc/mapper/mapping/simplePattern",["blue/declare","blue/is"],(function(e,t){"use strict";return e({constructor:function(e){if(!t.plainObject(e))throw new TypeError('"mappings" must be a plain object');this.mappings=e},lookup:function(e){var t=e?e.split("."):[],n=t[0]||"",r=t[0]&&t[1]?t[0]+"."+t[1]:"";return this.mappings[e]||this.mappings[r]||this.mappings[n]},toString:function(){return" Simple Pattern Mapping "}})})),define("blue-app/mvc/mapper/mapping/simplePatternAdditive",["blue/declare","blue/is"],(function(e,t){"use strict";return e({constructor:function(e){if(!t.plainObject(e))throw new TypeError('"mappings" must be a plain object');this.mappings=e},lookup:function(e){var t,n,r=e?e.split("."):[],i=r[0]||"",a=r[0]&&r[1]?r[0]+"."+r[1]:"";return(t=this.mappings[e]||this.mappings[a]||this.mappings[i])&&(n=e+","+t),n},toString:function(){return" Simple Pattern Mapping "}})})),define("blue-app/with/routable",["require","blue/is","blue-app/routeHandler","blue-app/mvc/handler/mapping/controllerName","blue-app/mvc/mapper/mapping/identity","blue-app/mvc/mapper/mapping/simplePattern","blue-app/mvc/mapper/mapping/simplePatternAdditive"],(function(e){"use strict";var t=Object.defineProperty,n=e("blue/is"),r=e("blue-app/routeHandler"),i=e("blue-app/mvc/handler/mapping/controllerName"),a={IdentityMapping:e("blue-app/mvc/mapper/mapping/identity"),ControllerNameMapping:i,SimpleUrlMapping:e("blue-app/mvc/mapper/mapping/simplePattern"),SimpleUrlAdditiveMapping:e("blue-app/mvc/mapper/mapping/simplePatternAdditive")};return function(e,i){var o,s=this;t(s,"routeHandler",{get:function(){return o},set:function(t){var a=o,u={};t instanceof r?u.handler=t:u=t,u.handler&&(a&&a.removeApi.call(s.context),(o=u.handler).registry=e,o.childTypes=i||[]),Array.isArray(u.mappings)&&u.mappings.forEach((function(e){n.string(e)?s.addRouteMapping(e):e.mapping&&s.addRouteMapping(e.mapping,e.config)})),o.api.call(s.context)},enumerable:!1}),t(s,"addRouteMapping",{value:function(){var e=Array.prototype.slice.call(arguments);if(s.routeHandler){if(n.string(e[0])){if(!a[e[0]])throw new Error("Unknown route mapping: "+e[0]);e[0]=a[e[0]]}s.routeHandler.addMapping.apply(s.routeHandler,e)}},configurable:!0,enumerable:!1,writable:!1}),t(s,"addRouteInterceptor",{value:function(){s.routeHandler&&s.routeHandler.addInterceptor.apply(s.routeHandler,arguments)},configurable:!0,enumerable:!1,writable:!1}),s.context.on("blue:route:routeRequest",(function(e){s.routeHandler.handleRequest(s,e)}))}})),define("blue-app/mvc/routingAPI",["require","blue/dom","blue/is","blue/util","blue/hash","blue/log"],(function(e){"use strict";var t,n=e("blue/dom"),r=e("blue/is"),i=e("blue/util"),a=e("blue/hash"),o=e("blue/log")("[app]"),s=i.object.merge,u=Object.defineProperty;function c(e){return!e.emit&&e.context&&e.context.emit?e.context:e}function l(e,t,n){var r,a,o=c(e),s=i.object.deepClone(t),u={app:"",area:"index",controller:"index",action:"index"},l={name:o.application?o.application.name:n.app.name,params:{}},p={name:o.area?o.area.name:n.area?n.area.name:"",params:{}},d={name:o.controller?o.controller.name:n.controller.name,params:{}},f={name:u.action,params:{}};for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&((r=s[a])?"string"==typeof r?s[a]={name:r,params:{}}:r.params||(r.params={}):s[a]={name:"",params:{}});return s.app.name&&s.action.name?s:(s.app.name&&(l.name=s.app.name),s.app.params&&(l.params=s.app.params),s.area.name&&(p.name=s.area.name),s.area.params&&(p.params=s.area.params),s.controller.name&&(d.name=s.controller.name),s.controller.params&&(d.params=s.controller.params),s.action.name&&(f.name=s.action.name),s.action.params&&(f.params=s.action.params),s.controller.name||s.action.name?s.action.name||(f.name=u.action):(d.name=u.controller,f.name=u.action),{app:l,area:p,controller:d,action:f,query:s.query})}function p(e,t,n){c(e).site.emitChildren("publicRoute",{route:t,isRedirect:n})}function d(e,t,n){c(e).site.emitChildren("privateRoute",{route:t,privateDataObject:n})}function f(){var e=r.string(arguments[0])?this.routeToObject(arguments[0]):arguments[0],t=arguments[1]||{},n=e.query?e.query.params:{},i=this.routeToObject();return r.string(arguments[0])&&arguments[0].length&&!arguments[1]&&"."!==arguments[0][0]?arguments[0]:((e=l(this,e,i)).action.params=s(e.action.params,t,n),this.objectToRoute(e))}function m(e){var t,r,i,o,s,u,c={app:{name:"",params:{}},area:{name:"",params:{}},controller:{name:"",params:{}},action:{name:"",params:{}},query:{string:"",params:{}}},l=e||n.location.href;return(t=(u=l)?((s=u.indexOf("#"))>=0&&(u=u.length<=s+1?"":u.substr(s+1)),"/"===u[0]?u.substr(1):u):"")?(o=(i=(r=t.split("?"))[0].split("/")).length,"."===i[0]&&2===o?c.action=a.parseSegment(i[1]):".."===i[0]&&2===o?c.controller=a.parseSegment(i[1]):".."===i[0]&&3===o?(c.controller=a.parseSegment(i[1]),c.action=a.parseSegment(i[2])):(3===o&&(c.app=a.parseSegment(i[0]),c.controller=a.parseSegment(i[1]),c.action=a.parseSegment(i[2])),4===o&&(c.app=a.parseSegment(i[0]),c.area=a.parseSegment(i[1]),c.controller=a.parseSegment(i[2]),c.action=a.parseSegment(i[3]))),r[1]&&(c.query.string=r[1],c.query.params=a.getParamsObj(t)||{}),c):c}return(t=function(){u(this,"routeToObject",{value:function(e){return l(this,m(e),m(n.location.href))},configurable:!0,enumerable:!1}),u(this,"objectToRoute",{value:function(e){var t,n="";return t=l(this,e,this.routeToObject()),n+="/"+a.segmentObjectToString(t.app),t.area&&t.area.name&&(n+="/"+a.segmentObjectToString(t.area)),n+="/"+a.segmentObjectToString(t.controller),n+="/"+a.segmentObjectToString(t.action),t.query&&t.query.string&&(n+="?"===t.query.string[0]?t.query.string:"?"+t.query.string),n},configurable:!0,enumerable:!1}),u(this,"state",{value:function(){var e,t;return 0===arguments.length?this.routeToObject():(void 0!==arguments[2]&&(t=!!arguments[2]),(e=f.apply(this,arguments))&&p(this,e,t),e)},configurable:!0,enumerable:!0}),u(this,"privateState",{value:function(){var e,t;if(0===arguments.length)return this.routeToObject();if(t=arguments[1]&&arguments[1].privateDataObject){try{t=JSON.parse(JSON.stringify(t))}catch(e){o.error("privateState - Unable to serialize privateDataObject"),t={}}delete arguments[1].privateDataObject}return(e=f.apply(this,arguments))&&d(this,e,t),e},configurable:!0,enumerable:!0}),u(this,"replaceState",{value:function(){var e;return 0===arguments.length?this.routeToObject():((e=f.apply(this,arguments))&&(a.replaceHash(e),d(this,e)),e)},configurable:!0,enumerable:!0})}).clean=function(){delete this.routeToObject,delete this.objectToRoute,delete this.state,delete this.privateState,delete this.replaceState},t})),define("blue-app/mvc/handler",["require","blue-app/mvc/routingAPI","blue/log","blue-app/routeHandler","./mapper/mapping","blue/util","blue/event/channel/component","blue/declare","blue/hash","blue/is","blue/util"],(function(e){"use strict";var t=e("blue-app/mvc/routingAPI"),n=e("blue/log"),r=e("blue-app/routeHandler"),i=e("./mapper/mapping"),a=e("blue/util").object.deepClone,o=e("blue/event/channel/component"),s=e("blue/declare"),u=e("blue/hash"),c=e("blue/is"),l=e("blue/util"),p=n("[blue:app]"),d=l.object.mixIn;function f(e){return(e.map((function(e){return e.name}))||[]).join(".")}function m(e){return e.substr(0,1).toUpperCase()+e.substr(1)}function h(e){var t=e.replace(/^ROOT\/SITE/,"").replace(/\/index$/,"");return 0===u.getHash().replace(/\?.*$/,"").split("/").map((function(e){return u.parseSegment(e).name})).join("/").indexOf(t)}function g(e,t){return e.actions?e.actions[t]:e[t]}function b(e,t,r,i,s,u){var l,f,m,h=g(e,t),b=e.context.newChild(),v=e.context.area?e.context.area.name:"",y={},E={},x=function(){setTimeout(b.destroy.bind(b),0)};e.context.bubble("blue:route:executeAction",{msgType:"blue:route:executeAction",id:r,contextPath:e.context.getStack(),route:t,params:i,query:s}),b.name=t,b.logger=n("[action:"+t+"]"),b.routeId=r,m=d({},i,s.params||{}),Object.keys(m).forEach((function(e){Object.defineProperty(b,e,{value:m[e],enumerable:!0,configurable:!0})})),u&&(b.privateDataObject=u);try{l=h.call(e,b)}catch(n){E.code="blue:app:error:actionExecutionError",E.description="Error in execution-of-action "+t,p.error("["+e.context.getStack()+"]",E.description,n),e.context.broadcast(E.code,E),(y=a(E)).code="blue:error:app:actionExecutionError",e.context.bubble(y.code,y)}finally{v&&e.context.application.emit("spinner:off",{name:v})}return l&&(f=function(e,t,n,r){var i,a=this,s=n.controller?n.controller.getStack():n.getStack(),u=n.area?n.area.name:"",l={};return t?(i=n.page&&n.page.viewResolverOptions?n.page.viewResolverOptions:void 0,l={routeId:r,controllerAction:e,resolverPathOptions:i,viewEngine:n.viewEngine,areaName:u,contextStack:s,activityChannel:o},c.thenable(t.promise)?t.promise.then((function(e){l.cavList=e,n.bubble("blue:application:display",l)}),(function(e){throw p.warn("["+a.context.getStack()+"]","Action promise failed",e),e})):c.thenable(t)?t.then((function(e){l.cavList=e,n.bubble("blue:application:display",l)}),(function(e){throw p.warn("["+a.context.getStack()+"]","Action promise failed",e),e})):(l.cavList=t,n.bubble("blue:application:display",l),Promise.resolve())):Promise.resolve()}(t,l,b,r),c.thenable(l)?l.then(x,x):c.thenable(l.promise)?l.promise.then(x,x):b.destroy()),e.context.bubble("blue:route:executeActionComplete",{msgType:"blue:route:executeActionComplete",id:r,contextPath:e.context.getStack(),route:t,params:i,query:s}),f}return s(r,{constructor:function(){r.apply(this,arguments),this.paramsCache={},this.api=t,this.removeApi=t.clean},getCachedParams:function(e){var t=this.paramsCache[e];if(t)return delete this.paramsCache[e],t},addMapping:function(e,t){this.mappings||(this.mappings=[]),this.mappings.push(new i(new e(t)))},handleRequest:function(e,t){var n,r,i=this,o=0===t.segments.length,s=f(t.segments)||"index",l=t.segments.map((function(e){return e.params||{}}))||[],v={name:"index",params:{}},y={},E=function(n){var r=t.segmentParams;return r&&h(e.context.getStack())&&(d(e.context,r),Object.keys(r).forEach((function(t){Object.defineProperty(e.context,t,{value:r[t],enumerable:!0,configurable:!0})}))),function(e,t,n){var r,i,o=e.context.area?e.context.area.areaName:"",s={},u={};if(t&&t.segments&&t.segments[0]){if((i=t.segments[0].name)&&(r=g(e,i))&&c.function(r))return b(e,i,t.routeId,t.segmentParams,t.query,t.privateDataObject);if(n)return o&&e.context.application.emit("spinner:off",{name:o}),u.code="blue:route:error:actionNotResolved",u.description="Error resolving executable-action for ",p.error("["+e.context.getStack()+"]",u.description,t),u.description+=i,e.context.broadcast(u.code,u),(s=a(u)).code="blue:error:route:actionNotResolved",e.context.bubble(s.code,s),Promise.reject()}return Promise.resolve()}(e,n,!i.childTypes.length)};i.paramsCache[t.routeId]=t.segmentParams,e.context.bubble("blue:route:handleRouteRequest",{msgType:"blue:route:handleRouteRequest",id:t.routeId,source:t.source,contextPath:e.context.getStack(),route:f(t.segments),nextSegment:t.segments[0]?t.segments[0].name:"",segments:t.segments,segmentParams:t.segmentParams,query:t.query}),h(e.context.getStack())&&o&&u.addSegmentToCurrentHash("index"),(y=a(t)).onSuccess=void 0,n=i.mapRequest(s,y),r=n.length,n&&0!==r?n.forEach((function(n,o){var s,u,c,f,g=(f=l,(c=n)?c.split(".").map((function(e,t){return{name:e,params:f[t]||{}}})):[]),b={},y={},x=[],C=g.shift(),S=a(t);S.segments=g,S.segmentParams=C.params||{},i.childTypes.length?(x=i.childTypes.filter((function(e){return function(e,t,n){return e["is"+m(n)](t)}(i.registry,C.name,e)})))[0]?(s=x[0],e.context.bubble("blue:route:mappedRequest",{msgType:"blue:route:mappedRequest",id:t.routeId,source:t.source,contextPath:e.context.getStack(),route:n,nextSegment:C.name,nextSegmentType:s,segments:g}),"area"===s&&e.context.application.emit("spinner:on",{name:C.name}),e.context.bubble("blue:route:lazyLoad",{msgType:"blue:route:lazyLoad",id:t.routeId,source:t.source,contextPath:e.context.getStack(),route:n,nextSegment:C.name,nextSegmentType:s,segments:g}),function(e,t,n){return e["get"+(n.substr(0,1).toUpperCase()+n.substr(1))](t)}(i.registry,C.name,s).then((function(r){S.segments=g,S.onSuccess.push(E.bind(e,S)),r.context.emit("blue:route:routeRequest",S),e.context.bubble("blue:route:lazyLoadComplete",{msgType:"blue:route:lazyLoadComplete",id:t.routeId,source:t.source,contextPath:e.context.getStack(),route:n,nextSegment:C.name,nextSegmentType:s,segments:g})})).catch((function(r){var i=e.context.area?e.context.area.areaName:"";i&&e.context.application.emit("spinner:off",{name:i}),e.context.bubble("blue:route:lazyLoadComplete",{msgType:"blue:route:lazyLoadComplete",id:t.routeId,source:t.source,contextPath:e.context.getStack(),route:n,nextSegment:C.name,nextSegmentType:s,segments:g}),r.requireType&&"timeout"===r.requireType?(p.error("["+e.context.getStack()+"]","Network timeout loading "+s+' module "'+C.name+'". Error: '+r.message),y.code="blue:route:error:areaLoadTimeout",y.description=m(s)+" "+C.name+" failed to load due to network timeout. Application may not proceed normally.",e.context.broadcast("blue:route:error:"+s+"LoadTimeout",y),(b=a(y)).code="blue:error:route:moduleNotFound",e.context.bubble("blue:error:route:"+s+"LoadTimeout",b)):(p.error("["+e.context.getStack()+"]","Unable to invoke "+m(s)+' "'+C.name+'". Error: '+r.message),y.code="blue:route:error:areaNotFound",y.description="Defined "+s+" "+C.name+" could not be invoked. Application may not proceed normally.",e.context.broadcast("blue:route:error:"+s+"NotFound",y),(b=a(y)).code="blue:error:route:moduleNotFound",e.context.bubble("blue:error:route:"+s+"NotFound",b))}))):(u=i.childTypes.map((function(e){return m(e)})).join(" or "),p.error("["+e.context.getStack()+"]",u+' "'+C.name+'" not found. Note: It could be mapped as an alias too, check your application main.js'),y.code="blue:route:error:moduleNotFound",y.description="A non-existent "+u+" has been requested by route. Application may not proceed normally.",e.context.broadcast(y.code,y),(b=a(y)).code="blue:error:route:moduleNotFound",e.context.bubble(b.code,b)):(d(C.params,S.query.params||{}),S.segments.unshift(C||v),h(e.context.getStack())||(S.onSuccess=[]),S.onSuccess.push(E.bind(e,S)),e.context.bubble("blue:route:mappedRequest",{msgType:"blue:route:mappedRequest",id:t.routeId,source:t.source,mappedLength:r,contextPath:e.context.getStack(),route:n,nextSegment:C.name,nextSegmentType:"action",segments:g}),S.onSuccess.forEach((function(e){e()})))})):p.warn("["+e.context.getStack()+"]",e.context.name+" mapped route to null action list for routeRequest:",s)},handleSuccess:function(e,t){var n=this.getCachedParams(e);n&&h(t.context.getStack())&&d(t.context,n)},toString:function(){return" MvcHandler "}})})),define("blue-app/controller",["require","blue/compose","blue/is","blue/log","blue/event/lifecycle","./component","blue-app/service","blue/observable","./with/locationAPI","blue-app/with/serviceConfigAPI","blue/as/contextual","blue/as/constructable","blue/as/dataProvider","blue/as/registry","blue/as/serializable","blue-app/with/routable","./mvc/handler","blue/perf","blue/intercept"],(function(e){"use strict";var t,n=Object.defineProperty,r=e("blue/compose"),i=e("blue/is"),a=e("blue/log"),o=e("blue/event/lifecycle"),s=e("./component"),u=e("blue-app/service"),c=e("blue/observable"),l=e("./with/locationAPI"),p=e("blue-app/with/serviceConfigAPI"),d=e("blue/as/contextual"),f=e("blue/as/constructable"),m=e("blue/as/dataProvider"),h=e("blue/as/registry"),g=e("blue/as/serializable"),b=e("blue-app/with/routable"),v=e("./mvc/handler"),y=e("blue/perf"),E=a("[blue:app]"),x=e("blue/intercept"),C=0,S=function(e,t){var r,s=this,u=c.Model();s.defineContext(t,{name:e,controllerName:e,logger:a("[controller:"+e+"]")}),s.defineConstruct(s.context),s.name=e,s.id="<"+e+"Controller:"+C+++">",n(s,"model",{get:function(){return u},set:function(e){e||(e={}),u!==e&&(u&&i.function(u.lens)&&u.destroy(),i.function(e.lens)?(e.destroyed&&(E.error("["+s.context.getStack()+"]","Tried to create-controller with destroyed model"),e=c.Model()),u=e):u=c.Model(e))},enumerable:!0}),n(s,"viewPath",{get:function(){return s.context.page?s.context.page.viewResolverOptions:void 0},set:function(e){!Object.hasOwnProperty.call(s.context,"page")&&(s.context.page={}),s.context.page.viewResolverOptions=e}}),b.call(s),s.routeHandler=new v,r=m(s),s.defineComponentsRegistry(s.context),s.defineServicesRegistry(s.context),s.register={components:function(e,t){t.forEach((function(e){var t,n=e.name;try{e.keepAlive=!0,e.legacy=!0,e.controller=s,t=s.registry.hasComponent(n)?s.registry.destroyComponent(n):Promise.resolve(),s.registry.registerComponent(n,e,!0),s.components[n].oldComponent=t}catch(e){throw E.error("["+s.context.getStack()+"]","Problems wiring together component "+n,e),e}}))}},s.executeCAV=s.context.executeCAV.bind(s.context),s.destroy=function(){var e,t,n;return t=new o({type:"controller",action:"destroy",stage:"begin",name:s.context&&s.context.name}),s.context.bubble(t.msgType,t),e=Promise.all([s.destroyComponentsRegistry(),s.destroyServicesRegistry()]).catch((function(){})).then((function(){r.destroy(),s.destroyConstruct(),n=new o({type:"controller",action:"destroy",stage:"begin",name:s.context&&s.context.name,beginEventName:t.eventName}),s.context.bubble(n.msgType,n),s.destroyContext()})),y.count.call({id:s.id},"blue/controller","destroy",s.name),e},p.call(s),y.count.call({id:s.id,ref:s},"blue/controller","create",s.name)};return S.prototype=Object.create(null),S.prototype.constructor=S,S.prototype.reroute=function(e){this.context.site.emitChildren("publicRoute",{route:e})},S.prototype.returnData=function(e){return e},g.call(S.prototype,(function(){return{CtrlID:this.id||"empty id",components:this.components?Object.keys(this.components):"empty components"}})),S=d.call(S,{name:"controller"}),f.call(S.prototype),h.call(S.prototype,"component",s,{onCreate:function(e,t){var n;if("model"in t){switch(t.model||E.warn("["+this.context.getStack()+"]","Component registry model passed as a 'falsy' value, resulting in empty lens path."),(n=t.model)&&n.constructor){case Object:case this.model.constructor:return;case String:break;default:n=""}t.model=n?this.model.lens(n):this.model.lens()}}}),h.call(S.prototype,"service",u),r(S.prototype,l),t=new l,Object.keys(t).forEach((function(e){x.after(S.prototype,e,(function(){E.warn("DEPRECATED:BLUEJS-3264: calling locationAPI "+e+" from controller module has been deprecated. Use context.location."+e+" instead")}))})),S})),define("blue-app/area",["require","./controller","./service","blue/site","blue/as/registry","blue/as/constructable","blue/as/contextual","blue/is","blue/log","blue-app/with/serviceConfigAPI","blue-app/with/routable","./routeHandler","./mvc/handler","wire"],(function(e){"use strict";var t=e("./controller"),n=e("./service"),r=e("blue/site"),i=e("blue/as/registry"),a=e("blue/as/constructable"),o=e("blue/as/contextual"),s=e("blue/is"),u=e("blue/log"),c=e("blue-app/with/serviceConfigAPI"),l=e("blue-app/with/routable"),p=e("./routeHandler"),d=e("./mvc/handler"),f=e("wire"),m=function(e,t){var n=this;this.defineContext(t,{name:e,areaName:e,logger:u("[area:"+e+"]"),page:{}}),this.name=e,this.defineConstruct(this.context),this.defineControllersRegistry(this.context),this.defineServicesRegistry(this.context),this.context.executeCAV=function(e){return n.context.application.executeCAV.call(this,e,n.context.areaName)},Object.defineProperties(this,{initialized:{value:!1,configurable:!0,enumerable:!1,writable:!1},viewPath:{get:function(){return n.context.page?n.context.page.viewResolverOptions:void 0},set:function(e){!Object.hasOwnProperty.call(n.context,"page")&&(n.context.page={}),n.context.page.viewResolverOptions=e}}}),l.call(this,this.registry,["controller"]),this.routeHandler=new d,c.call(this),this.wakeCount=0};return m.prototype=Object.create(null),m.prototype.constructor=m,m.prototype.loadSpec=function(){var e,t,n=this,i=new Promise((function(n,r){e=n,t=r})),a=[];return n.spec&&s.plainObject(n.spec)?f(n.spec).then((function(i){n.settings=i,n.mapAreaComponents(i),i.services&&(n.services=i.services),n.services&&(n.context.services=n.services),i.controllers&&(n.controllers=i.controllers),i.context&&n.configureAreaContext(n.context,i.context),i.imports?r.context._internal.import(n,i.imports).then((function(){e(n)}),t):e(n)})).catch((function(e){t(e)})):n.init||n.onInit||n.onLoad||n.onComplete?(n.services&&(n.context.services=n.services),e(n)):(n.mapAreaComponents(n),n.services&&(n.context.services=n.services),Object.keys(n.controllers).forEach((function(e){a.push(n.controllers[e])})),Promise.all(a).then((function(){e(n)}))),i},m.prototype.mapAreaComponents=function(e){var t,n=this,r=Object.keys(e);e.mappingHandler||r.some((function(r,i){if((t=e[r])instanceof p)return n.routeHandler={handler:t},!0}))},m.prototype.configureAreaContext=function(e,t){var n,r,i;if((r=Object.keys(t)).length)for(n=r.length;n--;)e[i=r[n]]=t[i],delete t[i]},m.prototype.destroy=function(){var e=this;return Promise.all([e.destroyControllersRegistry(),e.destroyServicesRegistry()]).catch((function(){})).then((function(){e.destroyConstruct(),e.destroyContext(),delete e.initialized}))},m.prototype.disable=function(){},m.prototype.enable=function(){!this.initialized&&s.function(this.init)&&(Object.defineProperty(this,"initialized",{value:!0}),this.init())},a.call(m.prototype),m=o.call(m,{name:"area"}),i.call(m.prototype,"controller",t,{lazy:!0,onAfterCreate:function(e,t){return t.routeHandler.mappings&&t.routeHandler.mappings.length||t.addRouteMapping("IdentityMapping"),t},immediate:!1}),i.call(m.prototype,"service",n,{immediate:!0}),m})),define("blue-app/mvc/targeter",["require","blue-app/mvc/mapper","blue/declare"],(function(e){"use strict";var t=e("blue-app/mvc/mapper");return e("blue/declare")(t,{constructor:function(){t.call(this)},targetRequest:function(e,t){return this.mapRequest(e,t)},toString:function(){return" Targeter "}})})),define("blue-app/load",["require","blue/is","blue/resolver/module"],(function(e){"use strict";var t=e("blue/is"),n=new(e("blue/resolver/module"));return n.prefix="wire!",n.suffix="/main",function(e,r,i){if(!t.string(e))throw new TypeError("name must be a string");if(!t.function(r))throw new TypeError("callback must be a function");void 0===i&&(i=this),n.resolve(e).onValue((function(e){r.call(i,e)}))}})),define("blue-app/cache/oneTimeCache",["blue/declare","blue/store/enumerable/memory"],(function(e,t){"use strict";return new(e({constructor:function(){this.store=new t("OneTimeCache")},has:function(e){return this.store.has(e)},get:function(e){var t=this.store.get(e);return this.store.remove(e),t},set:function(e,t){this.store.set(e,t)},remove:function(e){this.store.remove(e)}}))})),define("blue-app/cache/sessionCache",["blue/declare","blue/store/enumerable/memory"],(function(e,t){"use strict";return new(e({constructor:function(){this.store=new t("SessionCache")},has:function(e){return this.store.has(e)},get:function(e){return this.store.get(e)},set:function(e,t){this.store.set(e,t)},remove:function(e){this.store.remove(e)}}))})),define("blue-app/app",["require","exports","module","blue/as/contextual","blue/as/constructable","blue/as/registry","blue/site","blue-app/area","blue-app/service","blue-app/controller","blue/deferred","blue/event/channel","blue/event/channel/component","blue-app/with/routable","blue-app/with/serviceConfigAPI","blue/has","blue/hash","blue/is","blue-app/routeHandler","blue-app/mvc/handler","blue-app/mvc/targeter","blue/intercept","./with/locationAPI","blue-app/service/interceptor/cache","blue-app/load","blue/log","blue/root","blue/device/platform","blue-app/cache/oneTimeCache","blue-app/cache/sessionCache"],(function(e,t,n){"use strict";var r,i=Object.keys,a=n.config(),o=e("blue/as/contextual"),s=e("blue/as/constructable"),u=e("blue/as/registry"),c=e("blue/site"),l=e("blue-app/area"),p=e("blue-app/service"),d=e("blue-app/controller"),f=e("blue/deferred"),m=e("blue/event/channel"),h=e("blue/event/channel/component"),g=e("blue-app/with/routable"),b=e("blue-app/with/serviceConfigAPI"),v=e("blue/has"),y=e("blue/hash"),E=e("blue/is"),x=e("blue-app/routeHandler"),C=e("blue-app/mvc/handler"),S=e("blue-app/mvc/targeter"),_=e("blue/intercept"),w=e("./with/locationAPI"),A=e("blue-app/service/interceptor/cache"),O=e("blue-app/load"),R=e("blue/log"),P=e("blue/root"),N=e("blue/device/platform"),T=0,I=R("[blue:app]"),k=P.performance&&P.performance.now&&P.performance.mark,F=function(){this.request=function(){}};function D(e,t){var n="",r={};t&&t.code&&(n=t.code.split(":")),(r=e.util.object.deepClone(t)).code="blue:error",n.length&&4===n.length&&(r.code=r.code+":"+n[1]+":"+n[3]),e.bubble(r.code,r)}function j(e,t,n){setTimeout((function(){n.done||(n.done=!0,n.actions={},e.bubble("blue:route:routeComplete",{id:t}))}),20)}return e("blue-app/cache/oneTimeCache"),e("blue-app/cache/sessionCache"),_.withInterceptors.call(F.prototype,"request"),(r=function(e,t){var n=this;n.loadConfig=a,n.channel=new m({eventTarget:n}),n.viewTargeter=void 0,n.plugHandler=void 0,n.htmlTemplate=void 0,n.defaultHtmlTemplate=void 0,n.name=e,e&&(n.appName=e),n.defineContext(t,{name:e,appName:e,applicationName:e,config:n.loadConfig,logger:R("[application:"+e+"]")}),this.context.location={},w.call(this.context.location),n.context.executeCAV=function(e,t){var r,i,a=new Promise((function(e,t){r=e,i=t}));return this&&I.warn("["+this.getStack()+"]","DEPRECATED:BLUEJS-3051:executeCAV is unnecessary when following the view first pattern"),T++,n.context.bubble("blue:route:viewRenderStart",{msgType:"blue:route:viewRenderStart",id:this.routeId||"unknown",displayReqId:T,contextPath:this.getStack(),timestamp:k?performance.now():0,name:"blue:route:viewRenderBegin view "+(this.controller?this.controller.getStack():this.getStack())+" "+T}),n.tellPage("application:display",{routeId:this.routeId||"unknown",displayReqId:T,cavList:e,areaName:t||"",resolverPathOptions:this.page?this.page.viewResolverOptions:void 0,contextStack:this.controller?this.controller.getStack():this.getStack(),viewEngine:this.viewEngine,activityChannel:h,resolve:r,reject:i}),a},n.context.on({"page:error":function(e){n.context.broadcast(e.code,e),D(n.context,e)},"blue:site:error":function(e){D(n.context,e)}}),n.defineConstruct(n.context),n.defineControllersRegistry(n.context),n.defineAreasRegistry(n.context),n.defineServicesRegistry(n.context),b.call(n),n.tellPage=function(){},n.context.page={},g.call(n,n.registry,["controller","area"]),n.routeHandler=new C,n.context.on("blue:application:display",(function(e){T++,n.context.bubble("blue:route:viewRenderStart",{msgType:"blue:route:viewRenderStart",id:e.routeId,displayReqId:T,contextPath:e.contextStack,timestamp:k?performance.now():0}),e.displayReqId=T,n.tellPage("application:display",e)})),function(e,t){var n,r=0,a=0,o=!1,s=[],u=function(e){o&&(o=!1,e.bubble("blue:route:routeBatchCompleteForced",{msgType:"blue:route:routeBatchCompleteForced",id:a,routes:s}),e.bubble("blue:route:routeBatchComplete",{id:a,routes:s,name:"blue:route:routeBatchComplete site "+a}),r=0,s=[]),n=void 0};e.on("blue:route",(function(){n&&clearTimeout(n),n=setTimeout(u,1e3,e,n)})),e.on("blue:route:newRouteExecuting",(function(n){"external"===n.source&&r>0&&(e.bubble("blue:route:routeBatchComplete",{msgType:"blue:route:routeBatchComplete",id:a,routes:s,name:"blue:route:routeBatchComplete site "+a}),i(t).forEach((function(e){t[e].done=!0})),o=!1,r=0,s=[]),o||(a++,r=0,o=!0,e.bubble("blue:route:routeBatchBegin",{id:a,routes:s,name:"blue:route:routeBatchBegin site "+a})),r++,s.push({id:n.id,route:n.route,source:n.source}),void 0===t[n.id]&&("private"!==n.source&&i(t).forEach((function(n){t[n].done||"private"===t[n].source||j(e,n,t[n])})),t[n.id]={source:n.source,route:n.route,actions:{},services:{},views:{},start:0,stop:0})})),e.on("blue:route:routeComplete",(function(t){r--,setTimeout((function(){o&&r<1&&(o=!1,e.bubble("blue:route:routeBatchComplete",{msgType:"blue:route:routeBatchComplete",id:a,routes:s,name:"blue:route:routeBatchComplete site "+a}),r=0,s=[])}),250)})),e.on("blue:route:newRouteRequestAborted",(function(){r--,setTimeout((function(){o&&r<1&&(o=!1,e.bubble("blue:route:routeBatchComplete",{msgType:"blue:route:routeBatchComplete",id:a,routes:s,name:"blue:route:routeBatchComplete site "+a}),r=0,s=[])}),250)})),e.on("blue:service:serviceCallBegin",(function(e){var n=e.contextPath.replace(/[^/]+$/,"");i(t).forEach((function(r){!t[r].done&&i(t[r].actions).forEach((function(i){i.indexOf(n)>=0&&(t[r].start++,t[r].services[e.id]=!0)}))}))})),e.on("blue:service:serviceCallComplete",(function(n){var r=n.contextPath.replace(/[^/]+$/,"");i(t).forEach((function(a){!t[a].done&&i(t[a].actions).forEach((function(i){i.indexOf(r)>=0&&t[a].services[n.id]&&(t[a].stop++,!t[a].done&&t[a].stop>=t[a].start&&j(e,a,t[a]))}))}))})),e.on("blue:route:lazyLoad",(function(e){t[e.id]&&t[e.id].start++})),e.on("blue:route:executeAction",(function(e){t[e.id]&&(t[e.id].start++,t[e.id].actions[e.contextPath]=!0)})),e.on("blue:route:viewRenderStart",(function(e){t[e.id]?(t[e.id].start++,t[e.id].views[e.displayReqId]=!0):i(t).forEach((function(n){var r=t[n];r.done||(r.start++,r.views[e.displayReqId]=!0)}))})),e.on("blue:route:viewRenderComplete",(function(n){e.parent.bubble(n.msgType,n),t[n.id]?(t[n.id].stop++,!t[n.id].done&&t[n.id].stop>=t[n.id].start&&j(e,n.id,t[n.id])):i(t).forEach((function(r){var i=t[r];!i.done&&i.views[n.displayReqId]&&(i.stop++,!0,i.stop>=i.start&&j(e,r,i))}))})),e.on("blue:route:executeActionComplete",(function(n){t[n.id]&&(t[n.id].stop++,!t[n.id].done&&t[n.id].stop>=t[n.id].start&&j(e,n.id,t[n.id]))})),e.on("blue:route:lazyLoadComplete",(function(n){t[n.id]&&(t[n.id].stop++,!t[n.id].done&&t[n.id].stop>=t[n.id].start&&j(e,n.id,t[n.id]))})),e.on("blue:route:routeRequest",(function(t){var n,r,i="/"+y.parseMatrixParamHash(y.getHash()).app+"/",a=[];for(r=0;r<t.segments.length;r++)a.push(y.segmentObjectToString(t.segments[r]));i+=a.join("/")+(t.query.string?"?"+t.query.string:""),(n=y.parseMatrixParamHash(i)).mapping=n.pathSegments.join("."),"private"===t.source&&(n.privateDataObject=t.privateDataObject),e.broadcast("blue:routeChange",n)}))}(n.context,{})}).prototype=Object.create(null),r.prototype.constructor=r,r.prototype.destroy=function(){var e=this,t=[];return"function"==typeof this.onDestroy&&this.onDestroy(),t.push(this.destroyAreasRegistry()),t.push(this.destroyControllersRegistry()),t.push(this.destroyServicesRegistry()),Promise.all(t).then((function(){e.destroyConstruct(),e.destroyContext()}))},r.prototype.loadSpec=function(){var e,t,n,r=this,o=new Promise((function(e,r){t=e,n=r})),s=a&&a.cache?a.cache:{};return I.error("Client platform signature: "+JSON.stringify(N)),s&&s.constructor===Array&&s.length&&((e=new F).interceptors=[A],e.defineInterceptors(),s.forEach((function(t){e.request({url:t.url,cacheData:{usage:t.usage,response:t.response||{}}})}))),O(r.context.appName,(function(e){r.settings=e,r.mapAppComponents(),r.routeHandler.mappings&&r.routeHandler.mappings.length||r.addRouteMapping("IdentityMapping"),e.services||(e.services={}),e.controllers&&(r.controllers=e.controllers),e.areas&&(r.areas=e.areas),e.services&&(r.services=e.services),e.services&&(r.context.services=r.services),e.context&&r.configureAppContext(r.context,e.context),e.imports?c.context._internal.import(r,e.imports).then((function(){E.plainObject(r.context.areaMessageMap)&&i(r.context.areaMessageMap).forEach((function(e){r.configureAreaWakeUp(e,r.context.areaMessageMap[e])})),t(r)}),n):(E.plainObject(r.context.areaMessageMap)&&i(r.context.areaMessageMap).forEach((function(e){r.configureAreaWakeUp(e,r.context.areaMessageMap[e])})),t(r)),e.viewEngine&&(r.context.viewEngine=e.viewEngine)})),Blue.status.applicationLoaded.resolve().then((function(){var e;if(v("localstorage")&&P.localStorage.getItem)try{e=P.localStorage.getItem("blueNetworkAnalysisData"),(e=JSON.parse(e))&&(Blue.network.stats.speed=e.derivedSpeed||0,I.info("["+r.context.getStack()+"]","Network analysis data",e))}catch(e){I.warn("["+r.context.getStack()+"]","Unable to fetch blueNetworkAnalysisData from localStorage")}})),o.then((function(){r.context.broadcast("blue:applicationConfigComplete")})),o},r.prototype.configureAppContext=function(e,t){var n,r,a;if((r=i(t)).length)for(n=r.length;n--;)e[a=r[n]]=t[a],delete t[a]},r.prototype.configureAreaWakeUp=function(e,t){var n=this;t.split(/,\s*/).forEach((function(t){n.registry.isArea(t)&&n.context.once(e,(function(r){n.registry.hasArea(t)||n.registry.getArea(t).then((function(t){t.context.broadcast(e,r)})).catch((function(e){throw I.error("["+n.context.getStack()+"]","Error doing initial-load of area "+t,e),n.context.broadcast("blue:route:error:areaInitialLoadFailed",{code:"blue:route:error:areaInitialLoadFailed",description:"Error doing initial load of area "+t}),e}))}))}))},r.prototype.mapAppComponents=function(){var e,t=this,n=i(t.settings),r=n.length;n.some((function(n,i){return(e=t.settings[n])instanceof x?t.routeHandler=e:e instanceof S&&(t.viewTargeter=e),i<r&&!1}))},u.call(r.prototype,"area",l,{lazy:!0,onAfterCreate:function(e,t){var n=this;return new Promise((function(r,i){t.routeHandler.mappings&&t.routeHandler.mappings.length||t.addRouteMapping("IdentityMapping"),t.wakeCount?(t.wakeCount++,t.initComplete.promise.then((function(e){r(e)}))):(t.wakeCount=1,t.initComplete=new f,t.loadSpec().then((function(e){e.page&&e.page.viewResolverOptions&&(e.context.page.viewResolverOptions=e.page.viewResolverOptions),Promise.resolve(new Promise((function(t){t(E.function(n.onAreaLoad)?n.onAreaLoad(e):Promise.resolve())})).then((function(){Promise.resolve(new Promise((function(t){t(E.function(e.onLoad)?e.onLoad():Promise.resolve())})).then((function(){r(e),e.initComplete.resolve(e)}),(function(t){I.error("["+e.context.getStack()+"]","Error processing area's onLoad callback for area \""+name+'"',t),e.context.broadcast("blue:route:error:onLoadFailed",{code:"blue:route:error:onLoadFailed",description:'Error initializing area "'+name+'" after load: error in onLoad callback '}),i(t),e.initComplete.reject(t)})))}),(function(t){I.error("["+e.context.getStack()+"]",'Error processing onAreaLoad callback for area "'+name+'"',t),e.context.broadcast("blue:route:error:onAreaLoadFailed",{code:"blue:route:error:onAreaLoadFailed",description:'Error initializing area "'+name+'" after load: error in onAreaLoad callback '}),i(t),e.initComplete.reject(t)})))})).catch((function(n){I.error("["+t.context.getStack()+"]","Error processing area's wire config for area \""+e+'"',n),t.context.application.broadcast("blue:route:error:areaWireLoadFailed",{code:"blue:route:error:areaWireLoadFailed",description:'Error initializing area "'+e+'". Error encountered while processing area wire config: '+n}),t.initComplete.reject(n),i(n)})))}))}}),u.call(r.prototype,"controller",d,{lazy:!0,onAfterCreate:function(e,t){return t.routeHandler.mappings&&t.routeHandler.mappings.length||t.addRouteMapping("IdentityMapping"),t},immediate:!0}),u.call(r.prototype,"service",p),s.call(r.prototype),r=o.call(r,{name:"application"})})),define("blue-app/mvc/handler/interceptor/mocking",[],(function(){"use strict";return{after:function(e){return e.push("mocking.index"),e}}})),define("blue-app/mvc/handler/interceptor/shell",["blue/declare","blue/util"],(function(e,t){"use strict";var n=t.array.find;return e({constructor:function(){var e;for(this.name="ShellInterceptor",this.hasRun=!1,this.actions=[],e=0;e<arguments.length;e++)this.actions.push(arguments[e])},afterReturning:function(e){var t=n(this._interceptors,(function(e){return"ShellInterceptor"===e.name}));return t.hasRun||(t.actions.forEach((function(t){e.unshift(t)})),t.hasRun=!0),e}})})),define("blue-app/service/interceptor/deviceSignature",["require","blue/is","blue/util"],(function(e){"use strict";var t=e("blue/is"),n={isInstalled:function(e){return this.getInfo(e).isInstalled},getVersion:function(e){return this.getInfo(e).version},getInfo:function(e){var t=this.PLUGINS[e],n=!1,r=null;if(this.supportsNavigatorPlugins()){var i=this.findNavigatorPluginByName("RealPlayer"===e?"RealPlayer Version Plugin":e);i&&(n=!0,r=this.getVersionFromPlugin(i))}else if(n=this.hasActiveXObject(this.PLUGINS[e]&&this.PLUGINS[e].progID))if(this.PLUGINS[e].getActiveXVersionInfo)r=this.PLUGINS[e].getActiveXVersionInfo();else{var a=this.getProgIdForActiveXObject(this.PLUGINS[e].progID);r=this.getVersionFromPlugin(a)}else(r=this.getActiveXPluginByClassId(this.PLUGINS[e]&&this.PLUGINS[e].classID))&&(r=r.replace(/,/g,".")),n=null!=r;var o={};for(var s in t)Object.hasOwnProperty.call(t,s)&&(o[s]=t[s]);return o.isInstalled=n,o.version=r,o.name=e,o},PLUGINS:{Acrobat:{description:"Adobe Acrobat Plugin",progID:["PDF.PdfCtrl.7","PDF.PdfCtrl.6","PDF.PdfCtrl.5","PDF.PdfCtrl.4","PDF.PdfCtrl.3","AcroPDF.PDF.1"],classID:"CA8A9780-280D-11CF-A24D-444553540000"},QuickTime:{description:"QuickTime Plug-in",progID:["QuickTimeCheckObject.QuickTimeCheck.1","QuickTime.QuickTime"],classID:"02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",getActiveXVersionInfo:function(){var e=this.getProgIdForActiveXObject(this.PLUGINS.QuickTime.progID),t=new ActiveXObject(e),n=t&&t.QuickTimeVersion?t.QuickTimeVersion.toString(16):"";return n.substring(0,1)+"."+n.substring(1,2)+"."+n.substring(2,3)}},DivX:{description:"DivX Browser Plugin",progID:["npdivx.DivXBrowserPlugin.1","npdivx.DivXBrowserPlugin"],classID:"67DABFBF-D0AB-41fa-9C46-CC0F21721616"},Director:{description:"Macromedia Director",progID:["SWCtl.SWCtl.11","SWCtl.SWCtl.10","SWCtl.SWCtl.9","SWCtl.SWCtl.8","SWCtl.SWCtl.7","SWCtl.SWCtl.6","SWCtl.SWCtl.5","SWCtl.SWCtl.4"],classID:"166B1BCA-3F9C-11CF-8075-444553540000"},Flash:{description:"Macromedia Shockwave Flash",progID:["ShockwaveFlash.ShockwaveFlash.9","ShockwaveFlash.ShockwaveFlash.8.5","ShockwaveFlash.ShockwaveFlash.8","ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash.6","ShockwaveFlash.ShockwaveFlash.5","ShockwaveFlash.ShockwaveFlash.4"],classID:"D27CDB6E-AE6D-11CF-96B8-444553540000"},VLC:{description:"VLC multimedia plugin",progID:[],classID:""},"Windows Media":{description:"Windows Media Player Plug-in Dynamic Link Library",progID:["WMPlayer.OCX","MediaPlayer.MediaPlayer.1"],classID:"22D6f312-B0F6-11D0-94AB-0080C74C7E95",getActiveXVersionInfo:function(){var e=this.getProgIdForActiveXObject(this.PLUGINS["Windows Media"].progID),t=new ActiveXObject(e);return t&&t.versionInfo?t.versionInfo:""}},Java:{description:"Java Virtual Machine",progID:[],classID:"08B0E5C0-4FCB-11CF-AAA5-00401C608500"}},supportsNavigatorPlugins:function(){return navigator.plugins&&navigator.plugins.length>0},findNavigatorPluginByName:function(e){if(this.supportsNavigatorPlugins())for(var t=0;t<navigator.plugins.length;++t){var n=navigator.plugins[t];if(-1!==n.name.indexOf(e))return n}return null},getIEClientCaps:function(){var e=document.getElementById("__Plugin_ClientCaps");return e||((e=document.createElement("DIV")).id="__Plugin_ClientCaps",e.addBehavior&&(e.addBehavior("#default#clientCaps"),document.body.appendChild(e)),e=document.getElementById("__Plugin_ClientCaps")),e},getActiveXPluginByClassId:function(e){if(!e)return null;e.match(/{[^}]+}/)||(e="{"+e+"}");var t=this.getIEClientCaps();try{return t.getComponentVersion(e,"ComponentID")||null}catch(e){}return null},hasActiveXObject:function(e){return null!=(e=this.getProgIdForActiveXObject(e))},getProgIdForActiveXObject:function(e){if(!e)return null;for(var t=0;t<e.length;t++)try{return e[t]||null}catch(e){}return null},getVersionFromPlugin:function(e){e.name||(e={name:e,description:name});var t=/[\d][\d.]*/.exec(e.name);return t&&-1===e.name.indexOf("Java")||(t=/[\d.]+/.exec(e.description))?t[0]:""}},r={getDeviceSignature:function(){var e={};return e.navigator=this.getNavigatorProps(),e.plugins=this.getPlugins(),e.screen=this.getScreenProps(),e.extra=this.getExtraProps(),JSON.stringify(e)},getNavigatorProps:function(){var e={};for(var n in navigator)if(t.defined(navigator[n]))try{var r=navigator[n];"boolean"!=typeof r&&"number"!=typeof r&&"string"!=typeof r&&null!==r||(e[n]=r)}catch(e){}return e},getPlugins:function(){for(var e=[],t=new Array("Acrobat","QuickTime","DivX","Director","Windows Media","Flash","Java","VLC"),r=0,i=0;i<t.length;i++)try{if(n.isInstalled(t[i])){var a={},o=n.getInfo(t[i]);null!=o&&(a.name=o.description,a.version=o.version,e[r++]=a)}}catch(e){}return e},getScreenProps:function(){for(var e=["availHeight","availWidth","colorDepth","height","pixelDepth","width"],t={},n=0;n<e.length;n++)try{var r=screen[e[n]];null!=r&&(t[e[n]]=r)}catch(e){}return t},getExtraProps:function(){var e={},t=null;if("Microsoft Internet Explorer"===navigator.appName)try{t=ScriptEngineMajorVersion()+"."+ScriptEngineMinorVersion()+"."+ScriptEngineBuildVersion()}catch(e){}null!=t&&(e.vbscript_ver=t),e.javascript_ver="2.0";try{var n=new Date,r=n.toString();r.indexOf("PDT")>0||r.indexOf("MDT")>0||r.indexOf("CDT")>0||r.indexOf("EDT")>0||r.indexOf("Daylight")>0?e.timezone=n.getTimezoneOffset()+60:e.timezone=n.getTimezoneOffset()}catch(t){e.timezone=""}return e}},i=e("blue/util").object.merge;return{before:function(e){var t;try{t=r.getDeviceSignature()||"NA"}catch(e){t="NA"}return e.headers=i(e.headers||{},{"digital-device-signature":t}),e}}})),define("blue-app/service/interceptor/offline",[],(function(){"use strict";var e=[],t=function(t){for(var n,r=[];n=e.shift();)r.push(n);r.forEach((function(e){e(t)}))};return{around:function(n){var r=(n.args[0]||{}).disableOfflineHandler,i=n.target.context,a=i.onOfflineError;return r||!a?n.proceed():new Promise((function(r,o){!function(n,r,i,a,o){var s,u=function(c){if(!c)return i(s);n.proceed().then(r).catch((function(n){if(!a.env||!("onLine"in a.env)||a.env.onLine)return i(n);e.push(u),s=n,1===e.length&&o(t)}))};return u}(n,r,o,i,a)(!0)}))}}})),define("blue-app/service/interceptor/status",[],(function(){"use strict";var e={300:!0,301:!0,302:!0,303:!0,305:!0,306:!0,307:!0,308:!0},t=function(e,t){for(var n=t.split(".");e=e[n.shift()];)if(e.constructor===Function)return e};return{around:function(n){var r=1,i=n.args[0];return new Promise((function(a,o){var s=function(){n.proceed().then((function(e){var n=t(i,"handleSuccess");if(n)return a(n.call(e,e));(n=t(i,"handleStatus.200"))&&n.call(e,e),a(e)})).catch((function(n){var a,u=n.status;if(e[u]&&i.redirect&&r++<3)return i.url=n.getResponseHeader("Location"),s();(a=t(i,"handleError"))&&a.call(n,n),(a=t(i,"handleStatus."+u))&&a.call(n,n),o(n)}))};s()}))}}})),define("blue-app/userSettings",["require","blue/resource/persona"],(function(e){"use strict";var t={persona:(new(e("blue/resource/persona"))).read()};return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t})),define("blue-app/message/reporter/network",["require","blue/root"],(function(e){"use strict";var t=e("blue/root"),n=function(){var e=self,t=/%20/g,n=/^(?:GET|HEAD)$/,r={lastModified:{},etag:{}},i={text:function(e){return e.text()},json:function(e){return e.json().catch((function(t){throw e.headers&&(t.headers=e.headers),e.status&&(t.status=e.status,t.statusText=e.statusText),t}))},xml:function(e){return e.text().then((function(e){return(new DOMParser).parseFromString(e,"text/xml")}))},image:function(e){return e._bodyBlob?Promise.resolve(e._bodyBlob):"function"==typeof e.blob?e.blob():e.body&&e.body instanceof ReadableStream?e:Promise.reject(new Error("Blue:fetch - expected image blob, blob not found"))}},a={text:i.text,"application/json":i.json,"text/json":i.json,"application/xml":i.xml,"text/xml":i.xml,"image/bmp":i.image,"image/gif":i.image,"image/x-icon":i.image,"image/jpeg":i.image,"image/png":i.image,"image/svg+xml":i.image,"image/tiff":i.image,"image/webp":i.image},o=function(){e.onmessage=function(o){var s,u=o.data.url,c=o.data.options,l=c.data,p={cache:"default",credentials:"same-origin",headers:c.headers||{},method:c.method||c.type||"GET",mode:"cors",redirect:"follow"};c.xhrFields&&c.xhrFields.withCredentials&&(p.credentials="include"),c.contentType&&(p.headers["Content-Type"]=c.contentType),c.ifModified&&((s=r.lastModified[u])&&(p.headers["If-Modified-Since"]=s),(s=r.etag[u])&&(p.headers["If-None-Match"]=s)),!l||l.constructor===String||"processData"in c&&!c.processData||(l=function(e){var n=[],r=function(e,t){var r;r=t&&t.constructor===Function?t():null===t?"":t,n.push(encodeURIComponent(e)+"="+encodeURIComponent(r))};switch(e&&e.constructor){case Array:e.forEach((function(e){e&&r(e.name,e.value)}));break;case Object:Object.keys(e).forEach((function(t){r(t,e[t])}))}return n.join("&").replace(t,"+")}(l)),l&&(n.test(p.method)?u+=(-1===u.indexOf("?")?"?":"&")+l:p.body=l),e.fetch(new e.Request(u),p).then((function(e){var t={headers:e.headers,status:e.status,statusText:e.statusText,url:e.url||""};return c.ifModified&&((s=e.headers.get("Last-Modified"))&&(r.lastModified[u]=s),(s=e.headers.get("etag"))&&(r.etag[u]=s)),function(e,t){var n=e.headers.get("Content-Type")||"",r=n.split("/"),o=i[t]||a[n]||a[r[0]];return o?o(e):e.text()}(e,c.dataType).then((function(e){return t.data=e,t}))})).catch((function(t){throw t.headers?t:{headers:new e.Headers,status:0,statusText:t.message,url:u}})).then((function(t){e.postMessage({id:o.data.id,data:t.data})}))}};(o.prototype=Object.create(null)).constructor=o,new o},r=function(){var e=function(){var e=n.toString();return e=(e=e.replace(/^[\s\r\n]*function\s*\(\)\s*\{[\s\r\n]*/,"")).replace(/\}[\s\r\n]?$/,"")}();return new Blob([e],{type:"application/javascript"})},i=function(e){var n=this;if(this.type=e||"worker",this._callbacks=[],"worker"!==this.type)throw new Error('Network Worker type "'+e+'" not supported.');if(!t.Worker)throw new Error("Web Workers are not supported.");this.worker=new Worker((t.URL||t.webkitURL).createObjectURL(r())),this.worker.onmessage=function(e){var t;t=e.data,n._callbacks.forEach((function(e){try{e(t)}catch(e){}}))}};return(i.prototype=Object.create(null)).constructor=i,i.prototype.destroy=function(){this._callbacks=void 0,this.worker.terminate(),this.worker=void 0},i.prototype.subscribe=function(e){this._callbacks.push(e)},i.prototype.sendMessage=function(e){"worker"===this.type&&this.worker&&this.worker.postMessage(e)},i.prototype._reporterFunction=n,i})),define("blue-app/message/collector",["require","blue/observable","blue-app/message/reporter/network","blue/root","blue/util","blue-app/service"],(function(e){"use strict";var t=e("blue/observable"),n=e("blue-app/message/reporter/network"),r=e("blue/root"),i=e("blue/util").object.merge,a=e("blue-app/service"),o=0,s={},u=0,c={},l={NetworkReporter:n},p=function(e){c[e.id]&&(e.error?c[e.id].reject&&c[e.id].reject(e.error):c[e.id].resolve&&c[e.id].resolve(e.data),c[e.id]=void 0)},d=function(e){var t=this;this.reporter=function(e){if(!l[e=e||"NetworkReporter"])throw new Error("Unknown reporter type requested: "+e);return new l[e]}(e),this.reporter.subscribe(p),this._id=++o,s[this._id]={streamMap:{},configMap:{}},r.addEventListener("beforeunload",(function(){t.unloading=!0,t.destroy()}))};return(d.prototype=Object.create(null)).constructor=d,d.prototype.destroy=function(){var e=this;this._destroyed||(this._destroyed=!0,Object.keys(s[this._id].streamMap).forEach((function(t){s[e._id].streamMap[t].end()})),this.reporter.destroy(),this.reporter=void 0,s[this._id]=void 0)},d.prototype.plug=function(e,n,r){var o,c=this,l=s[this._id].streamMap,p=s[c._id].configMap[e];if(!this._destroyed){if(l[e])throw new Error("Stream name is already in use: "+e);if(!p||!p.url)throw new Error('No network configuration exists for stream "'+e+'"');r=r||{},l[e]={},l[e].sourceStream=t.stream((function(t){var r=n.onValue((function(e){t.emit(e)}));return l[e].end=t.end,function(){r()}})),o=function(e,t){return"time"===t.buffer?e.bufferWithTimeOrCount(t.interval,void 0):"count"===t.buffer?e.bufferWithCount(t.interval):e}(l[e].sourceStream,r||{}),r.beforeSend&&"function"==typeof r.beforeSend&&(o=o.map(r.beforeSend)),l[e].bufferedStream=o,l[e].bufferedStream.onValue((function(t){var n={};!t||Array.isArray(t)&&!t[0]||(n.id=++u,n.stream=e,n.options=i({},p),n.url=p.url,n.shutdown=c._destroyed||!1,Array.isArray(t)?n.options.data={events:t}:n.options.data=t,r.stringify&&(n.options.data=JSON.stringify(n.options.data)),a.prototype.prerequest.call(null,n.options,n.options.data),c.reporter.sendMessage(n))}))}},d.prototype.unplug=function(e){this._destroyed||s[this._id].streamMap[e].end()},d.prototype.send=function(e,t){var n=this,r={id:++u,url:e};if(this._destroyed)return Promise.resolve();if(r.options=i(s[n._id].configMap[e]||{},t),0===Object.keys(r.options).length)throw new Error('No network configuration exists for URL "'+e+'"');return r.options.url=e,a.prototype.prerequest.call(null,r.options,r.options.data),new Promise((function(e,t){c[r.id]={id:r.id,message:r,resolve:e,reject:t},n.reporter.sendMessage(r)}))},d.prototype.configureStream=function(e,t){if(!this._destroyed){if(!e)throw new Error("configureStream requires a stream name");s[this._id].configMap[e]=i({},t)}},d.prototype.configureURL=function(e,t){if(!this._destroyed){if(!e)throw new Error("configureURL requires a URL");s[this._id].configMap[e]=i({},t)}},d})),define("blue-app/main",(function(){}));