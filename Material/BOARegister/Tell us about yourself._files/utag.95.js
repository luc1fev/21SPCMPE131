//tealium universal tag - utag.95 ut4.0.202012031737, Copyright 2020 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.INQ_CLIENT_ORDER_NUM=exports.BOFA_SALE_INDICATORS=exports.ML_SALE_INDICATORS=exports.IR_ENV=exports.BOFA_DOMAINS=exports.SPARTA=exports.BOFA=exports.INTERNAL=exports.MERRILL=exports.GENESYS_SUSPEND_MONITORING=exports.INIT_CHAT=exports.PIXEL_TAG_URL=exports.WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL=exports.WIDGET_REQUEST_CONFIGURATION_ERROR=exports.SPARTA_WIDGET_READY=exports.WIDGET_REQUEST_CONFIGURATION=exports.CHAT_INITIALIZATION=exports.errorLoadingWidget=exports.spartaLoaderLoaded=exports.MONITORING_ID_RESPONSE=exports.MONITORINGJS_RESPONSE=exports.MONITORINGJS_HEARTBEAT_FAILURE=exports.MONITORINGJS_RESPONSE_FAILURE=exports.MAX_ERR_RETRIES=exports.SEND_PROXY_DATA=exports.SET_MONITORING_STATUS=exports.GRAB_HEARTBEAT_DATA=exports.CHECK_FOR_SALE=exports.CHECK_AH_TOKEN=exports.CANCEL_SITE_SUBS=exports.CANCEL_WIDGET_SUBS=exports.CANCEL_HEARTBEAT=exports.GWE_SEND_DISPOSITION_CODE_FAILURE=exports.GWE_SEND_DISPOSITION_CODE_SUCCESS=exports.GWE_SEND_DISPOSITION_CODE=exports.GENESYS_COBROWSE_CONFIGURATION=exports.GENESYS_COBROWSE_CONFIGURED=exports.GENESYS_QUALIFIED_LEAD=exports.GENESYS_CHECK_FOR_SALE=exports.PM_SEND_SALE_OCCURRED=exports.COMETD_META_DISCONNECT=exports.MONITORING_CLEAR_HEARTBEAT=exports.MONITORINGJS_HEARTBEAT=exports.MONITORINGJS_REQUEST=void 0;var MONITORINGJS_REQUEST='MONITORINGJS_REQUEST';exports.MONITORINGJS_REQUEST=MONITORINGJS_REQUEST;var MONITORINGJS_HEARTBEAT='MONITORINGJS_HEARTBEAT';exports.MONITORINGJS_HEARTBEAT=MONITORINGJS_HEARTBEAT;var MONITORING_CLEAR_HEARTBEAT='MONITORING_CLEAR_HEARTBEAT';exports.MONITORING_CLEAR_HEARTBEAT=MONITORING_CLEAR_HEARTBEAT;var COMETD_META_DISCONNECT='COMETD_META_DISCONNECT';exports.COMETD_META_DISCONNECT=COMETD_META_DISCONNECT;var PM_SEND_SALE_OCCURRED='PM_SEND_SALE_OCCURRED';exports.PM_SEND_SALE_OCCURRED=PM_SEND_SALE_OCCURRED;var GENESYS_CHECK_FOR_SALE='GENESYS_CHECK_FOR_SALE';exports.GENESYS_CHECK_FOR_SALE=GENESYS_CHECK_FOR_SALE;var GENESYS_QUALIFIED_LEAD='GENESYS_QUALIFIED_LEAD';exports.GENESYS_QUALIFIED_LEAD=GENESYS_QUALIFIED_LEAD;var GENESYS_COBROWSE_CONFIGURED='GENESYS_COBROWSE_CONFIGURED';exports.GENESYS_COBROWSE_CONFIGURED=GENESYS_COBROWSE_CONFIGURED;var GENESYS_COBROWSE_CONFIGURATION='GENESYS_COBROWSE_CONFIGURATION';exports.GENESYS_COBROWSE_CONFIGURATION=GENESYS_COBROWSE_CONFIGURATION;var GWE_SEND_DISPOSITION_CODE='GWE_SEND_DISPOSITION_CODE';exports.GWE_SEND_DISPOSITION_CODE=GWE_SEND_DISPOSITION_CODE;var GWE_SEND_DISPOSITION_CODE_SUCCESS='GWE_SEND_DISPOSITION_CODE_SUCCESS';exports.GWE_SEND_DISPOSITION_CODE_SUCCESS=GWE_SEND_DISPOSITION_CODE_SUCCESS;var GWE_SEND_DISPOSITION_CODE_FAILURE='GWE_SEND_DISPOSITION_CODE_FAILURE';exports.GWE_SEND_DISPOSITION_CODE_FAILURE=GWE_SEND_DISPOSITION_CODE_FAILURE;var CANCEL_HEARTBEAT='CANCEL_HEARTBEAT';exports.CANCEL_HEARTBEAT=CANCEL_HEARTBEAT;var CANCEL_WIDGET_SUBS='CANCEL_WIDGET_SUBS';exports.CANCEL_WIDGET_SUBS=CANCEL_WIDGET_SUBS;var CANCEL_SITE_SUBS='CANCEL_SITE_SUBS';exports.CANCEL_SITE_SUBS=CANCEL_SITE_SUBS;var CHECK_AH_TOKEN='CHECK_AH_TOKEN';exports.CHECK_AH_TOKEN=CHECK_AH_TOKEN;var CHECK_FOR_SALE='CHECK_FOR_SALE';exports.CHECK_FOR_SALE=CHECK_FOR_SALE;var GRAB_HEARTBEAT_DATA='GRAB_HEARTBEAT_DATA';exports.GRAB_HEARTBEAT_DATA=GRAB_HEARTBEAT_DATA;var SET_MONITORING_STATUS='SET_MONITORING_STATUS';exports.SET_MONITORING_STATUS=SET_MONITORING_STATUS;var SEND_PROXY_DATA='SEND_PROXY_DATA';exports.SEND_PROXY_DATA=SEND_PROXY_DATA;var MAX_ERR_RETRIES=3;exports.MAX_ERR_RETRIES=MAX_ERR_RETRIES;var MONITORINGJS_RESPONSE_FAILURE='MONITORINGJS_RESPONSE_FAILURE';exports.MONITORINGJS_RESPONSE_FAILURE=MONITORINGJS_RESPONSE_FAILURE;var MONITORINGJS_HEARTBEAT_FAILURE='MONITORINGJS_HEARTBEAT_FAILURE';exports.MONITORINGJS_HEARTBEAT_FAILURE=MONITORINGJS_HEARTBEAT_FAILURE;var MONITORINGJS_RESPONSE='MONITORINGJS_RESPONSE';exports.MONITORINGJS_RESPONSE=MONITORINGJS_RESPONSE;var MONITORING_ID_RESPONSE='MONITORING_ID_RESPONSE';exports.MONITORING_ID_RESPONSE=MONITORING_ID_RESPONSE;var spartaLoaderLoaded='spartaLoaderLoaded';exports.spartaLoaderLoaded=spartaLoaderLoaded;var errorLoadingWidget='errorLoadingWidget';exports.errorLoadingWidget=errorLoadingWidget;var CHAT_INITIALIZATION='CHAT_INITIALIZATION';exports.CHAT_INITIALIZATION=CHAT_INITIALIZATION;var WIDGET_REQUEST_CONFIGURATION='WIDGET_REQUEST_CONFIGURATION';exports.WIDGET_REQUEST_CONFIGURATION=WIDGET_REQUEST_CONFIGURATION;var SPARTA_WIDGET_READY='SPARTA_WIDGET_READY.spartaWidgetUtility';exports.SPARTA_WIDGET_READY=SPARTA_WIDGET_READY;var WIDGET_REQUEST_CONFIGURATION_ERROR='WIDGET_REQUEST_CONFIGURATION_ERROR';exports.WIDGET_REQUEST_CONFIGURATION_ERROR=WIDGET_REQUEST_CONFIGURATION_ERROR;var WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL='WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL';exports.WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL=WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL;var PIXEL_TAG_URL='https://www.bankofamerica.com/pa/global-assets/1.0/graphic/clr.gif';exports.PIXEL_TAG_URL=PIXEL_TAG_URL;var INIT_CHAT='INIT_CHAT';exports.INIT_CHAT=INIT_CHAT;var GENESYS_SUSPEND_MONITORING='GENESYS_SUSPEND_MONITORING';exports.GENESYS_SUSPEND_MONITORING=GENESYS_SUSPEND_MONITORING;var MERRILL='MERRILL';exports.MERRILL=MERRILL;var INTERNAL='INTERNAL';exports.INTERNAL=INTERNAL;var BOFA='BOFA';exports.BOFA=BOFA;var SPARTA='SPARTA';exports.SPARTA=SPARTA;var BOFA_DOMAINS=['dev1.','dev2.,','dev3.','dev4.','devflex.','devps.','qa5.','qaps.','cert1.','cert2.','pt1.','pt2.','preview1.','preview2.','review1.','review2.','dev1-helix.','dev2-helix.','dev3-helix.','dev4-helix.','devflex1-helix.','pt1-helix.','pt2-helix.','pssit-helix.','preview1-helix.','preview2-helix.','review1-helix.','review2-helix.','sit1a-helix.','sit2a-helix.','sit3-helix.','sitbc-helix.'];exports.BOFA_DOMAINS=BOFA_DOMAINS;var IR_ENV={DEV:'dev4',CERT:'sit1a'};exports.IR_ENV=IR_ENV;var ML_SALE_INDICATORS=['inqClientOrderNum','MLD_OAO_CONFIRMATIONNUMBER','MLD_OAO_ACCOUNTNUMBER'];exports.ML_SALE_INDICATORS=ML_SALE_INDICATORS;var BOFA_SALE_INDICATORS=['applicationID'];exports.BOFA_SALE_INDICATORS=BOFA_SALE_INDICATORS;var INQ_CLIENT_ORDER_NUM='inqClientOrderNum';exports.INQ_CLIENT_ORDER_NUM=INQ_CLIENT_ORDER_NUM;},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _pubSub=_interopRequireDefault(require("../vendor/pubSub"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
function _default(){if(window.location.href.indexOf('localhost')>-1)window.bactm_envSelector='notprod';if(bactm_envSelector==='notprod')console.groupCollapsed('Bactm.genesys.chat PubSub');(0,_pubSub["default"])();if(bactm_envSelector==='notprod')console.info('adding TealiumPubSub');if(bactm_envSelector==='notprod')console.groupEnd();return false;}},{"../vendor/pubSub":21}],3:[function(require,module,exports){"use strict";var _constants=require("../constants");var _addPubSub=_interopRequireDefault(require("./addPubSub"));var _subscriptions=_interopRequireDefault(require("./subscriptions"));var _utilities=require("./utilities");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
(0,_addPubSub["default"])();TealiumPubSub.subscribe(_constants.CHAT_INITIALIZATION,function(){TealiumPubSub.publish(_constants.WIDGET_REQUEST_CONFIGURATION,{spinner:true,version:(0,_utilities.whichVersion)(),container:'chat-placeholder',name:'www-chat',language:(0,_utilities.isSpanish)(),path:(0,_utilities.getDomain)()});});TealiumPubSub.subscribe(_constants.WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL,_subscriptions["default"]);},{"../constants":1,"./addPubSub":2,"./subscriptions":7,"./utilities":8}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _constants=require("../constants");var _coBrowse=_interopRequireDefault(require("../genesys/coBrowse"));var _sendDispositionCode=_interopRequireDefault(require("../genesys/sendDispositionCode"));var _agentIncentive=_interopRequireDefault(require("../genesys/agentIncentive"));var _request=_interopRequireDefault(require("../monitoring/request"));var _heartbeat=_interopRequireDefault(require("../monitoring/heartbeat"));var _postMessages=require("./postMessages");var _response=require("../monitoring/handlers/response");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
function _default(){TealiumPubSub.subscribe(_constants.MONITORINGJS_REQUEST,_request["default"]);TealiumPubSub.subscribe(_constants.MONITORINGJS_HEARTBEAT,_heartbeat["default"]);TealiumPubSub.subscribe(_constants.GENESYS_QUALIFIED_LEAD,_agentIncentive["default"]);TealiumPubSub.subscribe(_constants.GENESYS_COBROWSE_CONFIGURATION,_coBrowse["default"]);TealiumPubSub.subscribe(_constants.GWE_SEND_DISPOSITION_CODE,_sendDispositionCode["default"]);TealiumPubSub.subscribe(_constants.CANCEL_SITE_SUBS,_postMessages.postToCancelSubsOnSite);TealiumPubSub.subscribe(_constants.CHECK_AH_TOKEN,_postMessages.postToCheckAHToken);TealiumPubSub.subscribe(_constants.GRAB_HEARTBEAT_DATA,_response.grabHeartbeatData);if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat TealiumPubSub Subscribing');console.log("subscribing ".concat(_constants.MONITORINGJS_REQUEST));console.log("subscribing ".concat(_constants.MONITORINGJS_HEARTBEAT));console.log("subscribing ".concat(_constants.GENESYS_COBROWSE_CONFIGURATION));console.log("subscribing ".concat(_constants.GWE_SEND_DISPOSITION_CODE));console.groupEnd();}
return false;}},{"../constants":1,"../genesys/agentIncentive":11,"../genesys/coBrowse":12,"../genesys/sendDispositionCode":14,"../monitoring/handlers/response":18,"../monitoring/heartbeat":19,"../monitoring/request":20,"./postMessages":6}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;function _default(){if(bactm_envSelector==='notprod')console.groupCollapsed('Bactm.genesys.chat Placeholder');if(bactm_envSelector==='notprod')console.info('appending div#chat-placeholder to body');var $div=document.createElement('div');$div.id='chat-placeholder';document.body.appendChild($div);if(bactm_envSelector==='notprod')console.groupEnd();return false;}},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.postToCancelSubsOnSite=postToCancelSubsOnSite;exports.postToCheckAHToken=postToCheckAHToken;exports.setMonitoringStatus=setMonitoringStatus;exports.sendProxyPostMessage=sendProxyPostMessage;var _constants=require("../constants");var _utilities=require("./utilities");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}
function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}
function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
var chatWindow='';var chatSiteHost='';function terminateGenesysChat(){if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Canceling All Widget Subscriptions');console.log('Suspension of Monitoring Heartbeat Events and All Widget Subs');console.groupEnd();};TealiumPubSub.publish(_constants.GENESYS_SUSPEND_MONITORING);TealiumPubSub.clearAllSubscriptions();};function sendPostMessage(data){if(chatWindow)chatWindow.postMessage(data,chatSiteHost);};function handlePostMessage(event){if(event.data.utagInit){var currentTLD=(0,_utilities.getCurrentDomain)();chatWindow=document.getElementById('chatWindow').contentWindow;chatSiteHost=Object.values(spaWidgetParams['www-chat'])[0].siteParams.domains[currentTLD].chatSiteHost;var dataToSend={utagInit:{postMessageOrigin:window.location.origin}};sendPostMessage(dataToSend);};if(typeof event.data==='string'){if(event.origin!==chatSiteHost){if(bactm_envSelector==='notprod')console.error("Bad Origin: ".concat(event.origin));return;};switch(event.data){case _constants.CANCEL_WIDGET_SUBS:terminateGenesysChat();break;case _constants.GRAB_HEARTBEAT_DATA:TealiumPubSub.publish(_constants.GRAB_HEARTBEAT_DATA);break;case _constants.CHECK_FOR_SALE:(0,_utilities.whichDomain)()===_constants.BOFA?checkForSaleIndicators(digitalData.cart,'digitalData.cart',_constants.BOFA_SALE_INDICATORS):checkForSaleIndicators(digitalData.page.attributes.chat,'digitalData.page.attributes.chat',_constants.ML_SALE_INDICATORS);break;case _constants.CANCEL_HEARTBEAT:TealiumPubSub.publish(_constants.GENESYS_SUSPEND_MONITORING);break;default:break;};};};function checkForSaleIndicators(ddoLocation,ddoLocationStr,saleIndicators){if(bactm&&bactm.polyfills&&bactm.polyfills.object.exists(window,ddoLocationStr)){var salePresInd=(0,_utilities.isSalePresent)(ddoLocation);salePresInd?sendProxyPostMessage(_constants.INQ_CLIENT_ORDER_NUM,salePresInd):saleIndicators.forEach(function(indicator){return(0,_utilities.proxyChatDDO)(ddoLocation,indicator);});}}
function postToCancelSubsOnSite(){terminateGenesysChat();sendPostMessage(_constants.CANCEL_SITE_SUBS);};function postToCheckAHToken(){sendPostMessage(_constants.CHECK_AH_TOKEN);};function setMonitoringStatus(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{bactm.ddo.set('page.attributes.chat.monitoring',state);var monitoringData={message:_constants.SET_MONITORING_STATUS,monitoringStatus:state};sendPostMessage({vtimData:_objectSpread2({},monitoringData)});}catch(e){console.log(e);}}
function sendProxyPostMessage(_x,_x2){return _sendProxyPostMessage.apply(this,arguments);}
function _sendProxyPostMessage(){_sendProxyPostMessage=_asyncToGenerator(regeneratorRuntime.mark(function _callee(key,newValue){var message;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return window.boa.chat.reload();case 2:message=_constants.SEND_PROXY_DATA;sendPostMessage({vtimData:{message:message,key:key,newValue:newValue,genesysData:window.genesysData}});case 4:case"end":return _context.stop();}}},_callee);}));return _sendProxyPostMessage.apply(this,arguments);};window.addEventListener('message',handlePostMessage.bind(void 0),false);},{"../constants":1,"./utilities":8}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _constants=require("../constants");var _utilities=require("./utilities");var _configureCobrowse=_interopRequireDefault(require("../genesys/handlers/configureCobrowse"));var _response=_interopRequireDefault(require("../monitoring/handlers/response"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
function _default(){TealiumPubSub.subscribe(_constants.MONITORING_ID_RESPONSE,_utilities.publishWindow);TealiumPubSub.subscribe(_constants.PM_SEND_SALE_OCCURRED,_utilities.publishWindow);TealiumPubSub.subscribe(_constants.MONITORINGJS_RESPONSE,_response["default"]);window.sparta.chat.widgetLoader.sub(_constants.GENESYS_COBROWSE_CONFIGURATION,_configureCobrowse["default"]);window.sparta.chat.widgetLoader.sub(_constants.MONITORING_CLEAR_HEARTBEAT,function(){return(0,_utilities.publishTealium)(_constants.MONITORING_CLEAR_HEARTBEAT);});if(window.digitalData&&!window.digitalData.on_internal_page){window.sparta.chat.widgetLoader.sub(_constants.GENESYS_QUALIFIED_LEAD,function(_ref){var detail=_ref.detail;return(0,_utilities.publishTealium)(_constants.GENESYS_QUALIFIED_LEAD,detail);});window.sparta.chat.widgetLoader.sub(_constants.MONITORINGJS_REQUEST,function(_ref2){var detail=_ref2.detail;return(0,_utilities.publishTealium)(_constants.MONITORINGJS_REQUEST,detail);});window.sparta.chat.widgetLoader.sub(_constants.GWE_SEND_DISPOSITION_CODE,function(_ref3){var detail=_ref3.detail;return(0,_utilities.publishTealium)(_constants.GWE_SEND_DISPOSITION_CODE,detail);});window.sparta.chat.widgetLoader.sub(_constants.GENESYS_SUSPEND_MONITORING,function(){return(0,_utilities.publishTealium)(_constants.GENESYS_SUSPEND_MONITORING);});}
return false;}},{"../constants":1,"../genesys/handlers/configureCobrowse":13,"../monitoring/handlers/response":18,"./utilities":8}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isInternal=isInternal;exports.isMerrill=isMerrill;exports.isSparta=isSparta;exports.isSecureQA=isSecureQA;exports.whichDomain=whichDomain;exports.isSpanish=isSpanish;exports.queryStringParse=queryStringParse;exports.whichVersion=whichVersion;exports.getDomain=getDomain;exports.isEmptyObj=isEmptyObj;exports.isEmptyArr=isEmptyArr;exports.isSalePresent=isSalePresent;exports.proxyChatDDO=proxyChatDDO;exports.increaseErrorCount=increaseErrorCount;exports.getHostName=getHostName;exports.getTopLevelDomain=getTopLevelDomain;exports.getCurrentDomain=getCurrentDomain;exports.publishWindow=publishWindow;exports.publishTealium=publishTealium;var _constants=require("../constants");var _postMessages=require("../document/postMessages");function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
function isInternal(){return window.location.href.indexOf('//ghrsiebel')>-1||window.location.href.indexOf('//aconline')>-1||window.location.href.indexOf('//askhr')>-1;};function isMerrill(){return window.location.host.indexOf('.ml')>-1||window.location.host.indexOf('.merrilledge')>-1;};function isSparta(){return window.location.host.indexOf('sparta.')>-1;};function isSecureQA(){return window.location.host.indexOf('-qa5')>-1||window.location.host.indexOf('-qaps')>-1;};function whichDomain(){if(isMerrill()){return _constants.MERRILL;}else if(isInternal()){return _constants.INTERNAL;}else if(isSparta()){return _constants.SPARTA;}else{return _constants.BOFA;};};function isSpanish(){var spanishIdentifiers=["es-us","es","spanish","espanol"];var language=window.genesysData&&window.genesysData.LANGUAGE?window.genesysData.LANGUAGE:'en';var isSpanish=false;if(typeof language==='string'&&spanishIdentifiers.indexOf(language.toLowerCase())>-1){isSpanish=true;};return isSpanish?'es':'en';};function queryStringParse(name){var url=window.location.href;var regex=new RegExp('[?&]'+name+'(=([^&#]*)|&|#|$)');var results=regex.exec(url);if(results&&results[2])return decodeURIComponent(results[2]);return'';};function whichVersion(){if(bactm_envSelector&&bactm_envSelector==='notprod'){var version=queryStringParse('widgetVersion');if(version!=='')return version;return'3.0.0';}else{return'3.0.0';};};function getDomain(){var isProd=bactm_envSelector&&bactm_envSelector==='prod'?true:false;if(!isProd){var env=queryStringParse('chatEnv');if(env!=='')return"https://www-".concat(env,".ecnp.bankofamerica.com");if(window.location.host.indexOf('localhost')>-1)return"http://localhost:3005";}
switch(whichDomain()){case _constants.BOFA:if(isProd){return"https://www.bankofamerica.com";}else{for(var i=0;i<_constants.BOFA_DOMAINS.length;i++){if(window.location.hostname.indexOf(_constants.BOFA_DOMAINS[i])>-1){return"https://www-".concat(_constants.BOFA_DOMAINS[i],"ecnp.bankofamerica.com");}};return"https://www-".concat(_constants.IR_ENV.CERT,"-helix.ecnp.bankofamerica.com");}
case _constants.MERRILL:if(isProd){var mlDomain=getCurrentDomain();return"https://chatui.".concat(mlDomain);}else{var mlEnv=window.location.hostname.includes('pl1')||window.location.hostname.includes('pl2')?_constants.IR_ENV.CERT:_constants.IR_ENV.DEV;return"https://chatui-".concat(mlEnv,".ml.com");}
case _constants.INTERNAL:if(isProd){return'https://www.bankofamerica.com';}else{var intEnv=window.location.hostname.includes('-uat')||window.location.hostname.includes('qa.')?_constants.IR_ENV.CERT:_constants.IR_ENV.DEV;return"https://www-".concat(intEnv,"-helix.ecnp.bankofamerica.com");}
case _constants.SPARTA:var spartaEnv=queryStringParse('environment');if(spartaEnv!==''&&spartaEnv.startsWith('https'))return spartaEnv;return"https://www-".concat(_constants.IR_ENV.DEV,"-helix.ecnp.bankofamerica.com");default:return"https://www-".concat(_constants.IR_ENV.CERT,"-helix.ecnp.bankofamerica.com");};};function isEmptyObj(obj){if(_typeof(obj)==="object"){for(var key in obj){if(obj.hasOwnProperty(key))return false;}
return true;}else{return true;}}
function isEmptyArr(arr){return!(Array.isArray(arr)&&arr.length===0);}
function isSalePresent(ddo){var saleIndicators=whichDomain()===_constants.BOFA?_constants.BOFA_SALE_INDICATORS:_constants.ML_SALE_INDICATORS;for(var i=0;i<saleIndicators.length;i++){if(ddo[saleIndicators[i]]&&ddo[saleIndicators[i]]!==null&&ddo[saleIndicators[i]]!==''){return ddo[saleIndicators[i]];}}
return null;}
function proxyChatDDO(obj,key){var oldValue=obj[key];Object.defineProperty(obj,key,{get:function get(){return oldValue;},set:function set(newValue){if(bactm_envSelector==='notprod'){console.groupCollapsed('BACTM PROXY DDO CHANGE');console.log('newValue',newValue);console.groupEnd();};oldValue=newValue;if(key==='applicationID')key=_constants.INQ_CLIENT_ORDER_NUM;(0,_postMessages.sendProxyPostMessage)(key,newValue);}});}
function increaseErrorCount(){if(bactm&&bactm.ddo){var errorCount=bactm.ddo.get('page.attributes.chat.genesys_error_count')||0;errorCount++;bactm.ddo.set('page.attributes.chat.genesys_error_count',errorCount);if(errorCount===_constants.MAX_ERR_RETRIES)TealiumPubSub.publish(_constants.CANCEL_SITE_SUBS);}}
function getHostName(url){var match=url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(match!=null&&match.length>2&&typeof match[2]==='string'&&match[2].length>0){return match[2];};return null;};function getTopLevelDomain(url){var hostName=getHostName(url);var domain=hostName;if(hostName!=null){var parts=hostName.split('.').reverse();if(parts!=null&&parts.length>1){domain="".concat(parts[1],".").concat(parts[0]);}};return domain;};function getCurrentDomain(){return getTopLevelDomain(window.location.origin);};function publishWindow(eventName,payload){window.sparta.chat.widgetLoader.pub(eventName,payload);return false;}
function publishTealium(eventName,payload){TealiumPubSub.publish(eventName,payload);return false;}},{"../constants":1,"../document/postMessages":6}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _utilities=require("./utilities");var _constants=require("../constants");function _default(){if(bactm_envSelector==='notprod')console.groupCollapsed('Bactm.genesys.chat WidgetScript');var loader=document.createElement('script');loader.dataset.widgetName='chat';var widgetScriptURI='/spa/widgets/loader/3.0.0/index.js';var domain=(0,_utilities.getDomain)();loader.type='text/javascript';loader.src="".concat(domain).concat(widgetScriptURI);document.body.appendChild(loader);if(bactm_envSelector==='notprod')console.groupEnd();return false;}},{"../constants":1,"./utilities":8}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.publishWidgetConfigurationSuccess=publishWidgetConfigurationSuccess;exports.publishWidgetConfigurationError=publishWidgetConfigurationError;exports.subscribeWidgetConfiguration=subscribeWidgetConfiguration;exports.publishChatInitialization=publishChatInitialization;exports.spartaLoaderLoadedEvent=spartaLoaderLoadedEvent;exports["default"]=_default;var _constants=require("../constants");var _events=_interopRequireDefault(require("./events"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
function publishWidgetConfigurationSuccess(){TealiumPubSub.publish(_constants.WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL,{});if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Widget Configuration Response');console.log("publishing ".concat(_constants.WIDGET_REQUEST_CONFIGURATION_SUCCESSFUL),{});console.groupEnd();}}
function publishWidgetConfigurationError(){TealiumPubSub.publish(_constants.WIDGET_REQUEST_CONFIGURATION_ERROR,{});if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Widget Configuration Response');console.log("publishing ".concat(_constants.WIDGET_REQUEST_CONFIGURATION_ERROR),{});console.groupEnd();}}
function subscribeWidgetConfiguration(eventName,widgetConfiguration){window.sparta.chat.widgetLoader.load(widgetConfiguration);window.sparta.chat.widgetLoader.sub(_constants.errorLoadingWidget,publishWidgetConfigurationError);window.sparta.chat.widgetLoader.sub(_constants.SPARTA_WIDGET_READY,publishWidgetConfigurationSuccess);if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Widget Configuration');console.log('load SPARTA widget configuration w/ ',widgetConfiguration);console.groupEnd();}
return false;}
function publishChatInitialization(){TealiumPubSub.publish(_constants.CHAT_INITIALIZATION,{});if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Chat Initialization');console.log("publishing ".concat(_constants.CHAT_INITIALIZATION),{});console.groupEnd();}
return false;}
function spartaLoaderLoadedEvent(){(0,_events["default"])();publishChatInitialization();TealiumPubSub.subscribe(_constants.WIDGET_REQUEST_CONFIGURATION,subscribeWidgetConfiguration);return false;}
function _default(){if(window.sparta&&window.sparta.chat&&window.sparta.chat.widgetLoader){spartaLoaderLoadedEvent();}else{document.addEventListener('chat.spartaLoaderLoaded',spartaLoaderLoadedEvent);}
return false;}},{"../constants":1,"./events":4}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=genesysAgentQualifiedLead;var _constants=require("../constants");var _utilities=require("../document/utilities");function genesysAgentQualifiedLead(eventName,_ref){var agentID=_ref.agentID;if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Genesys Qualified Lead');console.log("published ".concat(eventName),agentID);console.groupEnd();}
try{var agentLTS=bactm.Store('chat',{type:'cookie'});if((0,_utilities.isMerrill)()){agentLTS.clear();}
agentLTS.set('secureAgentID',agentID);agentLTS.save();digitalData.page.attributes.chat.agent_id=agentLTS.get('secureAgentID');digitalData.page.attributes.chat.sale_occurred=false;}catch(e){if(bactm_envSelector==='notprod')console.log('Genesys Agent Qualified Lead',e);if(bactm&&bactm.plugins&&bactm.plugins.pixelTag)bactm.plugins.pixelTag.firePixelTag("".concat(_constants.PIXEL_TAG_URL,"?error=").concat(e));(0,_utilities.increaseErrorCount)();}}},{"../constants":1,"../document/utilities":8}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _constants=require("../constants");var _utilities=require("../document/utilities");function _default(eventName,configuration){try{if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Genesys Cobrowse');console.log("published ".concat(eventName),configuration);console.groupEnd();}
(function(d,s,id,o){var fs=d.getElementsByTagName(s)[0];var e;if(d.getElementById(id))return;e=d.createElement(s);e.id=id;e.src=o.src;e.setAttribute('data-gcb-url',o.cbUrl);fs.parentNode.insertBefore(e,fs);})(document,'script','genesys-js',{src:"".concat(configuration.envCobrowseURL,"js/gcb.min.js"),cbUrl:configuration.envCobrowseURL});window._genesys=configuration;TealiumPubSub.publish(_constants.GENESYS_COBROWSE_CONFIGURED,configuration);if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Genesys Cobrowse Response');console.log("publishing ".concat(_constants.GENESYS_COBROWSE_CONFIGURED),{});console.groupEnd();}}catch(e){if(bactm_envSelector==='notprod')console.log('VTIM:ERROR:genesysCobrowse',e);if(bactm&&bactm.plugins&&bactm.plugins.pixelTag)bactm.plugins.pixelTag.firePixelTag("".concat(_constants.PIXEL_TAG_URL,"?error=").concat(e));(0,_utilities.increaseErrorCount)();}}},{"../constants":1,"../document/utilities":8}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=handleConfigureCobrowse;var _utilities=require("../../document/utilities");var _constants=require("../../constants");function handleConfigureCobrowse(payload){var whichChat='www-chat';var widgetVersion=(0,_utilities.whichVersion)();var currentTLD=(0,_utilities.getCurrentDomain)();(0,_utilities.publishTealium)(_constants.GENESYS_COBROWSE_CONFIGURATION,Object.assign({},payload.detail,{envCobrowseURL:spaWidgetParams[whichChat][widgetVersion].siteParams.domains[currentTLD].cobrowse}));return false;}},{"../../constants":1,"../../document/utilities":8}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.failureSendDispositionCode=failureSendDispositionCode;exports["default"]=_default;var _constants=require("../constants");var _utilities=require("../document/utilities");function failureSendDispositionCode(dispositionResponse){TealiumPubSub.publish(_constants.GWE_SEND_DISPOSITION_CODE_FAILURE,dispositionResponse);if(bactm&&bactm.plugins&&bactm.plugins.pixelTag)bactm.plugins.pixelTag.firePixelTag("".concat(_constants.PIXEL_TAG_URL,"?error=").concat(dispositionResponse));if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Survey Response');console.log("publishing ".concat(_constants.GWE_SEND_DISPOSITION_CODE_FAILURE),dispositionResponse);console.groupEnd();}
(0,_utilities.increaseErrorCount)();return false;}
function _default(eventName,payload){try{var result=payload.result,engagementID=payload.engagementID,pageID=payload.pageID,visitID=payload.visitID;var widgetVersion=(0,_utilities.whichVersion)();var whichChat='www-chat';var currentTLD=(0,_utilities.getCurrentDomain)();var inviteURL=spaWidgetParams[whichChat][widgetVersion].siteParams.domains[currentTLD].monitoringjs;var sendDispositionUrl="".concat(inviteURL,"/server/data/invites/?result=").concat(result,"&engagementID=").concat(engagementID,"&pageID=").concat(pageID,"&visitID=").concat(visitID);if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Chat Disposition Code');console.log("published ".concat(eventName),payload);console.groupEnd();}
fetch(sendDispositionUrl,{method:'GET',headers:{'Content-Type':'application/json'},credentials:'include'});TealiumPubSub.publish(_constants.GENESYS_SUSPEND_MONITORING);}catch(error){if(bactm_envSelector==='notprod')console.log('VTIM:ERROR:genesysSurvey',error);failureSendDispositionCode(error);}}},{"../constants":1,"../document/utilities":8}],15:[function(require,module,exports){"use strict";require("whatwg-fetch");require("./document/bootstrap");require("./document/postMessages");var _placeholder=_interopRequireDefault(require("./document/placeholder"));var _widgetScript=_interopRequireDefault(require("./document/widgetScript"));var _widgetScriptLoaded=_interopRequireDefault(require("./document/widgetScriptLoaded"));var _genesysData=_interopRequireDefault(require("./monitoring/genesysData"));var _constants=require("./constants");var _utilities=require("./document/utilities");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
function initChat(){(0,_genesysData["default"])();(0,_placeholder["default"])();(0,_widgetScript["default"])();(0,_widgetScriptLoaded["default"])();(0,_utilities.proxyChatDDO)(window.digitalData.page.attributes.chat,'site_id');if(typeof bactm!=='undefined'){var agentLTS=bactm.Store('chat',{type:'cookie'});if(agentLTS.get('secureAgentID')){var agentID=agentLTS.get('secureAgentID');digitalData.page.attributes.chat.agent_id=agentID;}}}
if(window.digitalData&&window.digitalData.disableChatOnLoad===true){TealiumPubSub.subscribe(_constants.INIT_CHAT,initChat);}else{initChat();}},{"./constants":1,"./document/bootstrap":3,"./document/placeholder":5,"./document/postMessages":6,"./document/utilities":8,"./document/widgetScript":9,"./document/widgetScriptLoaded":10,"./monitoring/genesysData":16,"whatwg-fetch":22}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_initialize;var _utilities=require("../document/utilities");var _constants=require("../constants");function _readOnlyError(name){throw new Error("\""+name+"\" is read-only");}
function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
function _prepareData(ddo){var ddoChatData=bactm&&bactm.polyfills&&bactm.polyfills.object.exists(digitalData,'page.attributes.chat')?ddo.page.attributes.chat:{};var genesysDataFn={siteId:function siteId(){window.inqSiteID=ddoChatData.site_id||ddoChatData.SITE_ID||null;return window.inqSiteID;},language:function language(data){var language=data.page&&data.page.pageInfo&&Array.isArray(data.page.pageInfo)&&data.page.pageInfo.length>0?data.page.pageInfo[0].language:"";if(language===""&&typeof fsdNavClientOptions!=='undefined'&&fsdNavClientOptions){language=fsdNavClientOptions.locale;}
if(language===""&&data.page&&data.page.attributes&&data.page.attributes.chat){language=data.page.attributes.chat.LANGUAGE;}
return language;},disableChat:function disableChat(){if(window.bactm){var cookies=new window.bactm.Cookies();var mlo=cookies.get('boa_hlts_mlo');var qs=new window.bactm.QueryString();var affiliateCode=qs.get('affiliatecode');return mlo||affiliateCode?true:false;}},OID:function OID(data){return data.user?data.user.online_id:"";},authenticated:function authenticated(data){return data.user.authenticated?data.user.authenticated:false;},buildName:function buildName(data,filter){var firstName="";var lastName="";var fullName="";if(data.user&&data.user.name){firstName=data.user.name.first||"";lastName=data.user.name.last||"";fullName=data.user.name.full||"";}
switch(filter){case"first":if(firstName===""&&lastName===""){return fullName;}else{return firstName;}
break;case"last":return lastName;break;default:return fullName;break;}},firstName:function firstName(data){return genesysDataFn.buildName(data,"first");},lastName:function lastName(data){return genesysDataFn.buildName(data,"last");},firstOffer:function firstOffer(data,type){if(data.user&&data.user.offers&&data.user.offers.length>0){for(var offerid in data.user.offers[0]){switch(type){case"id":return offerid;break;case"code":return data.user.offers[0][offerid];break;}}}else{return"";}},firstOfferId:function firstOfferId(data){return genesysDataFn.firstOffer(data,"id");},firstOfferCode:function firstOfferCode(data){return genesysDataFn.firstOffer(data,"code");},state:function state(data){return data.user?data.user.state:"";},productName:function productName(data){if(!data.product||!Array.isArray(data.product))return'';var productNames=[];for(var i=0;i<data.product.length;i++){productNames.push(data.product[i].productInfo.productName);}
return productNames.join(',');},categories:function categories(data){if(!data.product||!Array.isArray(data.product))return'';var categories=[];for(var i=0;i<data.product.length;i++){categories.push(data.product[i].category.primaryCategory);}
return categories.join(',');},inqClientOrderNum:function inqClientOrderNum(data){var value=ddoChatData.inqClientOrderNum;if(value){if(Array.isArray(value)&&value.length===0)return'';if(_typeof(value)==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';window.inqClientOrderNum=value;return value;}
return data&&data.cart&&data.cart.fulfilmentID?data.cart.fulfilmentID:'';},inqOrderType:function inqOrderType(){var value=ddoChatData.inqOrderType;if(value){if(Array.isArray(value)&&value.length===0)return'';if(_typeof(value)==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';window.inqOrderType=value;return value;}
return'';},inqOtherInfo:function inqOtherInfo(){var value=ddoChatData.inqOtherInfo;if(value){if(Array.isArray(value)&&value.length===0)return'';if(_typeof(value)==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';window.inqOtherInfo=value;return value;}
return'';},inqSalesPrices:function inqSalesPrices(){var value=ddoChatData.inqSalesPrices;if(value){if(Array.isArray(value)&&value.length===0)return'';if(_typeof(value)==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';window.inqSalesPrices=value;return value;}
return'';},inqSalesProducts:function inqSalesProducts(){var value=ddoChatData.inqSalesProducts;if(value){if(Array.isArray(value)&&value.length===0)return'';if(_typeof(value)==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';if(!Array.isArray(value))value=(_readOnlyError("value"),[value]);window.inqSalesProducts=value;return value;}
return'';},inqSalesProductTypes:function inqSalesProductTypes(){var value=ddoChatData.inqSalesProductTypes;if(value){if(Array.isArray(value)&&value.length===0)return'';if(_typeof(value)==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';if(!Array.isArray(value))value=(_readOnlyError("value"),[value]);window.inqSalesProductTypes=value;return value;}
return'';},inqSalesQuantities:function inqSalesQuantities(){var value=ddoChatData.inqSalesQuantities;if(value){if(Array.isArray(value)&&value.length===0)return'';if(_typeof(value)==='object'&&Object.keys(value).length===0&&value.constructor===Object)return'';if(typeof value==='string'&&value==='[]')return'';if(!Array.isArray(value))value=(_readOnlyError("value"),[value]);window.inqSalesQuantities=value;return value;}
return'';},preferredRewardsTier:function preferredRewardsTier(data){return data.user&&data.user.preferred_rewards_tier?data.user.preferred_rewards_tier:"";},pageID:function pageID(data){return data.page&&data.page.pageInfo&&Array.isArray(data.page.pageInfo)&&data.page.pageInfo.length>0?data.page.pageInfo[0].pageID:"";},searchQuery:function searchQuery(data){return data.page&&data.page.attributes?data.page.attributes.searchString:"";},searchResult:function searchResult(data){return data.page&&data.page.attributes?data.page.attributes.searchResults:"";}};window.genesysData={ACCOUNT_TYPE:ddoChatData.account_type,APPLICATION:genesysDataFn.pageID(ddo),AUTHENTICATED:genesysDataFn.authenticated(ddo),BOA_ASSOCIATE:ddoChatData.boa_associate,BOA_RETIREE:ddoChatData.boa_retiree,CANCELREASON:ddoChatData.cancel_reason,CAT:genesysDataFn.categories(ddo),COMPANY_NAME:ddoChatData.company_name,CONVERSION_STAGE:ddoChatData.conversion_stage,CUSTOMER_LOB:ddoChatData.customer_lob,CUSTOMER_SEGMENT:ddoChatData.customer_segment,DATA:ddoChatData.data,DISABLE_CHAT:genesysDataFn.disableChat(),ENTITLEMENT_CODE:ddoChatData.entitlement_code,ERROR_COUNT:ddoChatData.error_count,FIRST_LOGIN:ddoChatData.first_login,FIRSTNAME:genesysDataFn.firstName(ddo),inqClientOrderNum:genesysDataFn.inqClientOrderNum(),inqOrderType:genesysDataFn.inqOrderType(),inqOtherInfo:genesysDataFn.inqOtherInfo(),inqSalesPrices:genesysDataFn.inqSalesPrices(),inqSalesProducts:genesysDataFn.inqSalesProducts(),inqSalesProductTypes:genesysDataFn.inqSalesProductTypes(),inqSalesQuantities:genesysDataFn.inqSalesQuantities(),inqSiteID:genesysDataFn.siteId(),LANGUAGE:genesysDataFn.language(ddo),LASTNAME:genesysDataFn.lastName(ddo),NAM:genesysDataFn.productName(ddo),ONLINE_ID:genesysDataFn.OID(ddo),OFR:genesysDataFn.firstOfferId(ddo),OFFER_CODE:genesysDataFn.firstOfferCode(ddo),PAGE_TYPE:ddoChatData.PageType,PAGE_LOADTIME:ddoChatData.page_loadtime,PREFERRED_REWARDS_TIER:genesysDataFn.preferredRewardsTier(ddo),PREQUALIFICATION:genesysDataFn.pageID(ddo),PRODUCT_DISPLAY:genesysDataFn.productName(ddo),PRODUCT_TYPE:ddoChatData.Product_type,PRODUCT_VIEW:genesysDataFn.productName(ddo),PRODUCTSELECTION_PURCHASEFLOW:genesysDataFn.pageID(ddo),REFERRAL_CAMPAIGN:ddoChatData.referral_campaign,STATE:genesysDataFn.state(ddo),SUB_SECTION:ddoChatData.Sub_Section,TIMEZONE:ddoChatData.timezone,TOOL_INTERNALSEARCHQUERY:genesysDataFn.searchQuery(ddo),TOOL_INTERNALSEARCHRESULT:genesysDataFn.searchResult(ddo),TOPIC_SELECTION:ddoChatData.topic_selection};function validateValue(value){var empty=value===""||value===null||typeof value==="undefined"||!(0,_utilities.isEmptyArr)(value)||!(0,_utilities.isEmptyObj)(value);return!empty;}
for(var item in genesysData){if(validateValue(genesysData[item])){continue;}else{delete genesysData[item];}}}
function _reload(){if((0,_utilities.whichDomain)()===_constants.MERRILL||(0,_utilities.whichDomain)()===_constants.INTERNAL){window.genesysData={};window.genesysData=bactm&&bactm.ddo?bactm.ddo.get('page.attributes.chat'):digitalData.page.attributes.chat;}else{var ddo=window.digitalData;_prepareData(ddo);};return false;}
function _initialize(){if((0,_utilities.whichDomain)()===_constants.MERRILL||(0,_utilities.whichDomain)()===_constants.INTERNAL){window.genesysData={};window.genesysData=bactm&&bactm.ddo?bactm.ddo.get('page.attributes.chat'):digitalData.page.attributes.chat;var refreshGenesysData=setInterval(_reload,15000);}else{var ddo=window.digitalData;_prepareData(ddo);var _refreshGenesysData=setInterval(_reload,15000);}}
window.boa=window.boa||{};window.boa.chat={init:_initialize,reload:_reload};},{"../constants":1,"../document/utilities":8}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=handleGrabData;var _constants=require("../../constants");function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
var arraysMatch=function checkArrs(arr1,arr2){if(arr1.length!==arr2.length)return false;for(var i=0;i<arr1.length;i++){if(arr1[i]!==arr2[i])return false;}
return true;};var compare=function compareItems(item1,item2,key,diffs){var type1=Object.prototype.toString.call(item1);var type2=Object.prototype.toString.call(item2);if(type2==='[object Undefined]'){diffs[key]=null;}
if(type1!==type2){diffs[key]=item2;}
if(type1==='[object Object]'){var objDiff=diff(item1,item2);if(Object.keys(objDiff).length>1){diffs[key]=objDiff;}}
if(type1==='[object Array]'){if(!arraysMatch(item1,item2)){diffs[key]=item2;}}
if(type1==='[object Function]'){if(item1.toString()!==item2.toString()){diffs[key]=item2;}}else if(item1!==item2){diffs[key]=item2;}
return diffs;};var diff=function findDifferences(obj1,obj2){if(!obj2||Object.prototype.toString.call(obj2)!=='[object Object]'){return obj1;}
var diffs={};for(var i=0,keys=Object.keys(obj1);i<keys.length;i++){diffs=compare(obj1[keys[i]],obj2[keys[i]],keys[i],diffs);}
for(var _i=0,_keys=Object.keys(obj2);_i<_keys.length;_i++){if(!obj1[_keys[_i]]&&obj1[_keys[_i]]!==obj2[_keys[_i]]){diffs[_keys[_i]]=obj2[_keys[_i]];}}
return diffs;};function handleGrabData(data,keyboardTimestamp,mouseTimestamp){var newData={};if(data==={}){data=window.genesysData;}else{newData=window.genesysData;}
var deltaData=diff(data,newData);var user_keyboard_activity=keyboardTimestamp;var user_mouse_activity=mouseTimestamp;var dataToSend;if(user_keyboard_activity&&user_mouse_activity){dataToSend=_objectSpread2({},deltaData,{user_keyboard_activity:user_keyboard_activity,user_mouse_activity:user_mouse_activity});}else if(user_keyboard_activity){dataToSend=_objectSpread2({},deltaData,{user_keyboard_activity:user_keyboard_activity});}else if(user_mouse_activity){dataToSend=_objectSpread2({},deltaData,{user_mouse_activity:user_mouse_activity});}else{dataToSend=_objectSpread2({},deltaData);}
TealiumPubSub.publish(_constants.MONITORINGJS_HEARTBEAT,dataToSend);var newOriginalData=_objectSpread2({},data,{},newData);return newOriginalData;}},{"../../constants":1}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=handleMonitoringResponse;exports.grabHeartbeatData=grabHeartbeatData;var _grabData=_interopRequireDefault(require("./grabData"));var _constants=require("../../constants");var _postMessages=require("../../document/postMessages");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
var originalData={};var mouseEvent;var keyboardEvent;document.addEventListener('keyup',function(){keyboardEvent=Date.now();});document.addEventListener('mousemove',function(){mouseEvent=Date.now();});function handleMonitoringResponse(){var heartbeatsSent=0;(0,_postMessages.setMonitoringStatus)(true);var heartbeatTimer=setInterval(function(){if(document.visibilityState==='visible'){if(heartbeatsSent<20){TealiumPubSub.publish(_constants.CHECK_AH_TOKEN);heartbeatsSent++;}else{clearHeartbeat();};};},30000);TealiumPubSub.publish(_constants.CHECK_AH_TOKEN);function clearHeartbeat(){(0,_postMessages.setMonitoringStatus)(false);clearInterval(heartbeatTimer);TealiumPubSub.unsubscribe(_constants.GENESYS_SUSPEND_MONITORING);}
TealiumPubSub.subscribe(_constants.GENESYS_SUSPEND_MONITORING,clearHeartbeat);}
function grabHeartbeatData(){originalData=(0,_grabData["default"])(originalData,keyboardEvent,mouseEvent);}},{"../../constants":1,"../../document/postMessages":6,"./grabData":17}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _constants=require("../constants");var _utilities=require("../document/utilities");function _default(eventName,payload){try{if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Monitoring Heartbeat');console.log("published ".concat(eventName),payload);console.groupEnd();}
_gt.push(['event','heartbeat',{data:payload}]);}catch(e){if(bactm_envSelector==='notprod')console.log('VTIM:ERROR:monitoringHeartbeat',e);TealiumPubSub.publish(_constants.MONITORINGJS_HEARTBEAT_FAILURE,e);if(bactm&&bactm.plugins&&bactm.plugins.pixelTag)bactm.plugins.pixelTag.firePixelTag("".concat(_constants.PIXEL_TAG_URL,"?error=").concat(e));(0,_utilities.increaseErrorCount)();}
return false;}},{"../constants":1,"../document/utilities":8}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _constants=require("../constants");var _utilities=require("../document/utilities");var _default=function _default(eventName,requestConfiguration){try{var isMonitoring=bactm.ddo.get('page.attributes.chat.monitoring');if(isMonitoring)return;window._gt=window._gt||[];var httpsEndpoint=requestConfiguration.httpsEndpoint,httpEndpoint=requestConfiguration.httpEndpoint,resourcePath=requestConfiguration.resourcePath,gtcjEndpoint=requestConfiguration.gtcjEndpoint;var protocol=document.location.protocol==='https:'?httpsEndpoint:httpEndpoint;var configuration={dslResource:"".concat(protocol,"/").concat(resourcePath),httpEndpoint:httpEndpoint,httpsEndpoint:httpsEndpoint,gtcjEndpoint:gtcjEndpoint};if(bactm_envSelector==='notprod'){console.groupCollapsed('Bactm.genesys.chat Monitoring Request');console.log("published ".concat(eventName),requestConfiguration);console.groupEnd();}
_gt.push(['config',configuration]);(function(d,s,id,o){var fs=d.getElementsByTagName(s)[0];var e;if(d.getElementById(id))return;e=d.createElement(s);e.id=id;e.src=o.src;fs.parentNode.insertBefore(e,fs);})(document,'script','domain-xml',{src:configuration.dslResource});_gt.push(['getIDs',function(IDs){TealiumPubSub.publish(_constants.MONITORING_ID_RESPONSE,IDs);}]);(function(d,s,id,o){var fs=d.getElementsByTagName(s)[0];var e;if(d.getElementById(id))return;e=d.createElement(s);e.id=id;e.src=o.src;fs.parentNode.insertBefore(e,fs);})(document,'script','_gt',{src:"".concat(configuration.httpsEndpoint,"/").concat(configuration.gtcjEndpoint)});TealiumPubSub.publish(_constants.MONITORINGJS_RESPONSE,{});}catch(e){if(bactm_envSelector==='notprod')console.log('VTIM:ERROR:monitoringRequest',e);TealiumPubSub.publish(_constants.MONITORINGJS_RESPONSE_FAILURE,e);if(bactm&&bactm.plugins&&bactm.plugins.pixelTag)bactm.plugins.pixelTag.firePixelTag("".concat(_constants.PIXEL_TAG_URL,"?error=").concat(e));(0,_utilities.increaseErrorCount)();}
return false;};exports["default"]=_default;},{"../constants":1,"../document/utilities":8}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
function _default(){var PubSub={};var messages={},lastUid=-1;function hasKeys(obj){var key;for(key in obj){if(obj.hasOwnProperty(key)){return true;}}
return false;}
function throwException(ex){return function reThrowException(){throw ex;};}
function callSubscriberWithDelayedExceptions(subscriber,message,data){try{subscriber(message,data);}catch(ex){setTimeout(throwException(ex),0);}}
function callSubscriberWithImmediateExceptions(subscriber,message,data){subscriber(message,data);}
function deliverMessage(originalMessage,matchedMessage,data,immediateExceptions){var subscribers=messages[matchedMessage],callSubscriber=immediateExceptions?callSubscriberWithImmediateExceptions:callSubscriberWithDelayedExceptions,s;if(!messages.hasOwnProperty(matchedMessage)){return;}
for(s in subscribers){if(subscribers.hasOwnProperty(s)){callSubscriber(subscribers[s],originalMessage,data);}}}
function createDeliveryFunction(message,data,immediateExceptions){return function deliverNamespaced(){var topic=String(message),position=topic.lastIndexOf('.');deliverMessage(message,message,data,immediateExceptions);while(position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');deliverMessage(message,topic,data,immediateExceptions);}};}
function messageHasSubscribers(message){var topic=String(message),found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic])),position=topic.lastIndexOf('.');while(!found&&position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic]));}
return found;}
function publish(message,data,sync,immediateExceptions){message=_typeof(message)==='symbol'?message.toString():message;var deliver=createDeliveryFunction(message,data,immediateExceptions),hasSubscribers=messageHasSubscribers(message);if(!hasSubscribers){return false;}
if(sync===true){deliver();}else{setTimeout(deliver,0);}
return true;}
PubSub.publish=function(message,data){return publish(message,data,false,PubSub.immediateExceptions);};PubSub.publishSync=function(message,data){return publish(message,data,true,PubSub.immediateExceptions);};PubSub.subscribe=function(message,func){if(typeof func!=='function'){return false;}
message=_typeof(message)==='symbol'?message.toString():message;if(!messages.hasOwnProperty(message)){messages[message]={};}
var token='uid_'+String(++lastUid);messages[message][token]=func;return token;};PubSub.subscribeOnce=function(message,func){var token=PubSub.subscribe(message,function(){PubSub.unsubscribe(token);func.apply(this,arguments);});return PubSub;};PubSub.clearAllSubscriptions=function clearAllSubscriptions(){messages={};};PubSub.clearSubscriptions=function clearSubscriptions(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){delete messages[m];}}};PubSub.unsubscribe=function(value){var descendantTopicExists=function descendantTopicExists(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){return true;}}
return false;},isTopic=typeof value==='string'&&(messages.hasOwnProperty(value)||descendantTopicExists(value)),isToken=!isTopic&&typeof value==='string',isFunction=typeof value==='function',result=false,m,message,t;if(isTopic){PubSub.clearSubscriptions(value);return;}
for(m in messages){if(messages.hasOwnProperty(m)){message=messages[m];if(isToken&&message[value]){delete message[value];result=value;break;}
if(isFunction){for(t in message){if(message.hasOwnProperty(t)&&message[t]===value){delete message[t];result=true;}}}}}
return result;};window.TealiumPubSub=PubSub;}},{}],22:[function(require,module,exports){(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(factory((global.WHATWGFetch={})));}(this,(function(exports){'use strict';var support={searchParams:'URLSearchParams'in self,iterable:'Symbol'in self&&'iterator'in Symbol,blob:'FileReader'in self&&'Blob'in self&&(function(){try{new Blob();return true}catch(e){return false}})(),formData:'FormData'in self,arrayBuffer:'ArrayBuffer'in self};function isDataView(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}
if(support.arrayBuffer){var viewClasses=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'];var isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};}
function normalizeName(name){if(typeof name!=='string'){name=String(name);}
if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name)){throw new TypeError('Invalid character in header field name')}
return name.toLowerCase()}
function normalizeValue(value){if(typeof value!=='string'){value=String(value);}
return value}
function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(support.iterable){iterator[Symbol.iterator]=function(){return iterator};}
return iterator}
function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value);},this);}else if(Array.isArray(headers)){headers.forEach(function(header){this.append(header[0],header[1]);},this);}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name]);},this);}}
Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+', '+value:value;};Headers.prototype['delete']=function(name){delete this.map[normalizeName(name)];};Headers.prototype.get=function(name){name=normalizeName(name);return this.has(name)?this.map[name]:null};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value);};Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map){if(this.map.hasOwnProperty(name)){callback.call(thisArg,this.map[name],name,this);}}};Headers.prototype.keys=function(){var items=[];this.forEach(function(value,name){items.push(name);});return iteratorFor(items)};Headers.prototype.values=function(){var items=[];this.forEach(function(value){items.push(value);});return iteratorFor(items)};Headers.prototype.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value]);});return iteratorFor(items)};if(support.iterable){Headers.prototype[Symbol.iterator]=Headers.prototype.entries;}
function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError('Already read'))}
body.bodyUsed=true;}
function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result);};reader.onerror=function(){reject(reader.error);};})}
function readBlobAsArrayBuffer(blob){var reader=new FileReader();var promise=fileReaderReady(reader);reader.readAsArrayBuffer(blob);return promise}
function readBlobAsText(blob){var reader=new FileReader();var promise=fileReaderReady(reader);reader.readAsText(blob);return promise}
function readArrayBufferAsText(buf){var view=new Uint8Array(buf);var chars=new Array(view.length);for(var i=0;i<view.length;i++){chars[i]=String.fromCharCode(view[i]);}
return chars.join('')}
function bufferClone(buf){if(buf.slice){return buf.slice(0)}else{var view=new Uint8Array(buf.byteLength);view.set(new Uint8Array(buf));return view.buffer}}
function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(!body){this._bodyText='';}else if(typeof body==='string'){this._bodyText=body;}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body;}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body;}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this._bodyText=body.toString();}else if(support.arrayBuffer&&support.blob&&isDataView(body)){this._bodyArrayBuffer=bufferClone(body.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer]);}else if(support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))){this._bodyArrayBuffer=bufferClone(body);}else{this._bodyText=body=Object.prototype.toString.call(body);}
if(!this.headers.get('content-type')){if(typeof body==='string'){this.headers.set('content-type','text/plain;charset=UTF-8');}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set('content-type',this._bodyBlob.type);}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8');}}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}
if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error('could not read FormData body as blob')}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return consumed(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(readBlobAsArrayBuffer)}};}
this.text=function(){var rejected=consumed(this);if(rejected){return rejected}
if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error('could not read FormData body as text')}else{return Promise.resolve(this._bodyText)}};if(support.formData){this.formData=function(){return this.text().then(decode)};}
this.json=function(){return this.text().then(JSON.parse)};return this}
var methods=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}
function Request(input,options){options=options||{};var body=options.body;if(input instanceof Request){if(input.bodyUsed){throw new TypeError('Already read')}
this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers);}
this.method=input.method;this.mode=input.mode;this.signal=input.signal;if(!body&&input._bodyInit!=null){body=input._bodyInit;input.bodyUsed=true;}}else{this.url=String(input);}
this.credentials=options.credentials||this.credentials||'same-origin';if(options.headers||!this.headers){this.headers=new Headers(options.headers);}
this.method=normalizeMethod(options.method||this.method||'GET');this.mode=options.mode||this.mode||null;this.signal=options.signal||this.signal;this.referrer=null;if((this.method==='GET'||this.method==='HEAD')&&body){throw new TypeError('Body not allowed for GET or HEAD requests')}
this._initBody(body);}
Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})};function decode(body){var form=new FormData();body
.trim()
.split('&')
.forEach(function(bytes){if(bytes){var split=bytes.split('=');var name=split.shift().replace(/\+/g,' ');var value=split.join('=').replace(/\+/g,' ');form.append(decodeURIComponent(name),decodeURIComponent(value));}});return form}
function parseHeaders(rawHeaders){var headers=new Headers();var preProcessedHeaders=rawHeaders.replace(/\r?\n[\t ]+/g,' ');preProcessedHeaders.split(/\r?\n/).forEach(function(line){var parts=line.split(':');var key=parts.shift().trim();if(key){var value=parts.join(':').trim();headers.append(key,value);}});return headers}
Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={};}
this.type='default';this.status=options.status===undefined?200:options.status;this.ok=this.status>=200&&this.status<300;this.statusText='statusText'in options?options.statusText:'OK';this.headers=new Headers(options.headers);this.url=options.url||'';this._initBody(bodyInit);}
Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:''});response.type='error';return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError('Invalid status code')}
return new Response(null,{status:status,headers:{location:url}})};exports.DOMException=self.DOMException;try{new exports.DOMException();}catch(err){exports.DOMException=function(message,name){this.message=message;this.name=name;var error=Error(message);this.stack=error.stack;};exports.DOMException.prototype=Object.create(Error.prototype);exports.DOMException.prototype.constructor=exports.DOMException;}
function fetch(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted){return reject(new exports.DOMException('Aborted','AbortError'))}
var xhr=new XMLHttpRequest();function abortXhr(){xhr.abort();}
xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||'')};options.url='responseURL'in xhr?xhr.responseURL:options.headers.get('X-Request-URL');var body='response'in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options));};xhr.onerror=function(){reject(new TypeError('Network request failed'));};xhr.ontimeout=function(){reject(new TypeError('Network request failed'));};xhr.onabort=function(){reject(new exports.DOMException('Aborted','AbortError'));};xhr.open(request.method,request.url,true);if(request.credentials==='include'){xhr.withCredentials=true;}else if(request.credentials==='omit'){xhr.withCredentials=false;}
if('responseType'in xhr&&support.blob){xhr.responseType='blob';}
request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value);});if(request.signal){request.signal.addEventListener('abort',abortXhr);xhr.onreadystatechange=function(){if(xhr.readyState===4){request.signal.removeEventListener('abort',abortXhr);}};}
xhr.send(typeof request._bodyInit==='undefined'?null:request._bodyInit);})}
fetch.polyfill=true;if(!self.fetch){self.fetch=fetch;self.Headers=Headers;self.Request=Request;self.Response=Response;}
exports.Headers=Headers;exports.Request=Request;exports.Response=Response;exports.fetch=fetch;Object.defineProperty(exports,'__esModule',{value:true});})));},{}]},{},[15]);}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("95","bofa.main");}catch(error){utag.DB(error);}
